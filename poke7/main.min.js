var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},CheckScene=function(t){function e(e){var i=t.call(this)||this;return i.p7ws=e,i.init(),i}return __extends(e,t),e.prototype.init=function(){this.cardAnimationEnd=!1,this.resultCheck=null,this.resultAnimationReady=!1,this.resultDrawAnimationReady=!1,this.resultAnimationEnd=!1,this.checkAnimationEnd=!1,this.container=new egret.Sprite,this.container.width=960,this.container.height=540,this.bg=new egret.Bitmap(RES.getRes("check_bg_png")),this.container.addChild(this.bg),this.p1Card=new egret.Sprite,this.p1Card.width=175,this.p1Card.height=245,this.p1Card.x=this.container.width/2-245,this.p1Card.y=this.container.height/2-122.5+50,this.p1Card.alpha=.01,this.p1Card_res_8=new egret.Bitmap(RES.getRes("check_8_b_png")),this.p1Card_res_9=new egret.Bitmap(RES.getRes("check_9_b_png")),this.p1Card_res_10=new egret.Bitmap(RES.getRes("check_10_b_png")),this.p1Card_res_j=new egret.Bitmap(RES.getRes("check_j_b_png")),this.p1Card_res_q=new egret.Bitmap(RES.getRes("check_q_b_png")),this.p1Card_res_k=new egret.Bitmap(RES.getRes("check_k_b_png")),this.p1Card_res_0=new egret.Bitmap(RES.getRes("check_joker_b_png")),this.p2Card=new egret.Sprite,this.p2Card.width=175,this.p2Card.height=245,this.p2Card.x=this.container.width/2+70,this.p2Card.y=this.container.height/2-122.5+50,this.p2Card.alpha=.01,this.p2Card_res_8=new egret.Bitmap(RES.getRes("check_8_r_png")),this.p2Card_res_9=new egret.Bitmap(RES.getRes("check_9_r_png")),this.p2Card_res_10=new egret.Bitmap(RES.getRes("check_10_r_png")),this.p2Card_res_j=new egret.Bitmap(RES.getRes("check_j_r_png")),this.p2Card_res_q=new egret.Bitmap(RES.getRes("check_q_r_png")),this.p2Card_res_k=new egret.Bitmap(RES.getRes("check_k_r_png")),this.p2Card_res_0=new egret.Bitmap(RES.getRes("check_joker_r_png")),this.p1Result=new egret.Sprite,this.p1Result.width=95,this.p1Result.height=70,this.p1Result.x=this.p1Card.x+40,this.p1Result.y=this.p1Card.y-80,this.p1Result.alpha=.01,this.p1Result_res_w=new egret.Bitmap(RES.getRes("check_win_png")),this.p2Result=new egret.Sprite,this.p2Result.width=95,this.p2Result.height=70,this.p2Result.x=this.p2Card.x+40,this.p2Result.y=this.p2Card.y-80,this.p2Result.alpha=.01,this.p2Result_res_w=new egret.Bitmap(RES.getRes("check_win_png")),this.resultDraw=new egret.Sprite,this.resultDraw.width=95,this.resultDraw.height=70,this.resultDraw.x=(this.p1Result.x+this.p2Result.x)/2,this.resultDraw.y=this.p1Result.y,this.resultDraw.alpha=.01,this.resultDraw_res=new egret.Bitmap(RES.getRes("check_draw_png")),this.stage.addChild(this.container)},e.prototype.resetToInit=function(){this.cardData=null,this.cardAnimationEnd=!1,this.resultCheck=null,this.resultAnimationReady=!1,this.resultDrawAnimationReady=!1,this.resultAnimationEnd=!1,this.checkAnimationEnd=!1,this.p1Card.removeChildren(),this.p2Card.removeChildren(),this.p1Result.removeChildren(),this.p2Result.removeChildren(),this.resultDraw.removeChildren(),this.p1Card.alpha=.01,this.p2Card.alpha=.01,this.p1Result.alpha=.01,this.p2Result.alpha=.01,this.resultDraw.alpha=.01,this.container.contains(this.p1Card)&&this.container.removeChild(this.p1Card),this.container.contains(this.p2Card)&&this.container.removeChild(this.p2Card),this.container.contains(this.p1Result)&&this.container.removeChild(this.p1Result),this.container.contains(this.p2Result)&&this.container.removeChild(this.p2Result),this.container.contains(this.resultDraw)&&this.container.removeChild(this.resultDraw)},e.prototype.getCardResFromString=function(t,e){var i;if("p1"==t)switch(e){case"8":i=new egret.Bitmap(RES.getRes("check_8_b_png"));break;case"9":i=new egret.Bitmap(RES.getRes("check_9_b_png"));break;case"10":i=new egret.Bitmap(RES.getRes("check_10_b_png"));break;case"11":i=new egret.Bitmap(RES.getRes("check_j_b_png"));break;case"12":i=new egret.Bitmap(RES.getRes("check_q_b_png"));break;case"13":i=new egret.Bitmap(RES.getRes("check_k_b_png"));break;case"0":i=new egret.Bitmap(RES.getRes("check_joker_b_png"))}else if("p2"==t)switch(e){case"8":i=new egret.Bitmap(RES.getRes("check_8_r_png"));break;case"9":i=new egret.Bitmap(RES.getRes("check_9_r_png"));break;case"10":i=new egret.Bitmap(RES.getRes("check_10_r_png"));break;case"11":i=new egret.Bitmap(RES.getRes("check_j_r_png"));break;case"12":i=new egret.Bitmap(RES.getRes("check_q_r_png"));break;case"13":i=new egret.Bitmap(RES.getRes("check_k_r_png"));break;case"0":i=new egret.Bitmap(RES.getRes("check_joker_r_png"))}return i},e}(egret.Stage);__reflect(CheckScene.prototype,"CheckScene");var FightScene=function(t){function e(e){var i=t.call(this)||this;return i.p7ws=e,i.init(),i}return __extends(e,t),e.prototype.init=function(){this.container=new egret.Sprite,this.container.width=960,this.container.height=540,this.bg=new egret.Bitmap(RES.getRes("fight_bg_png")),this.container.addChild(this.bg),this.chooseCard=new egret.Sprite,this.chooseCard.width=100,this.chooseCard.height=140,this.chooseCard.x=this.container.width/2-50,this.chooseCard.y=10,this.container.addChild(this.chooseCard),this.chooseCard_res_b=[],this.chooseCard_res_b[0]=new egret.Bitmap(RES.getRes("card_8_b_png")),this.chooseCard_res_b[1]=new egret.Bitmap(RES.getRes("card_9_b_png")),this.chooseCard_res_b[2]=new egret.Bitmap(RES.getRes("card_10_b_png")),this.chooseCard_res_b[3]=new egret.Bitmap(RES.getRes("card_j_b_png")),this.chooseCard_res_b[4]=new egret.Bitmap(RES.getRes("card_q_b_png")),this.chooseCard_res_b[5]=new egret.Bitmap(RES.getRes("card_k_b_png")),this.chooseCard_res_b[6]=new egret.Bitmap(RES.getRes("card_joker_b_png")),this.chooseCard_res_r=[],this.chooseCard_res_r[0]=new egret.Bitmap(RES.getRes("card_8_r_png")),this.chooseCard_res_r[1]=new egret.Bitmap(RES.getRes("card_9_r_png")),this.chooseCard_res_r[2]=new egret.Bitmap(RES.getRes("card_10_r_png")),this.chooseCard_res_r[3]=new egret.Bitmap(RES.getRes("card_j_r_png")),this.chooseCard_res_r[4]=new egret.Bitmap(RES.getRes("card_q_r_png")),this.chooseCard_res_r[5]=new egret.Bitmap(RES.getRes("card_k_r_png")),this.chooseCard_res_r[6]=new egret.Bitmap(RES.getRes("card_joker_r_png")),this.lockBtn=new egret.Sprite,this.lockBtn.width=280,this.lockBtn.height=108,this.lockBtn.x=this.container.width/2-140,this.lockBtn.y=160,this.lockBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.lockCardBtnTouchHandler,this),this.lockBtn_res_t=new egret.Bitmap(RES.getRes("btn_lock_b_png")),this.lockBtn_res_f=new egret.Bitmap(RES.getRes("btn_lock_g_png")),this.container.addChild(this.lockBtn),this.lockText=new egret.Sprite,this.lockText.width=200,this.lockText.height=100,this.lockText.x=this.container.width/2-90,this.lockText.y=270,this.container.addChild(this.lockText),this.lockText_d=new egret.TextField,this.lockText_d.size=30,this.lockText_d.textColor=0,this.lockText_d.textAlign="center","ch"==this.p7ws.lang?this.lockText_d.text="(對手已出牌)":"en"==this.p7ws.lang&&(this.lockText_d.text="(enemy locked)"),this.r8=new egret.Sprite,this.r8.width=65,this.r8.height=73,this.r8.x=this.container.width/7-32.5-67,this.r8.y=330,this.container.addChild(this.r8),this.r9=new egret.Sprite,this.r9.width=65,this.r9.height=73,this.r9.x=this.container.width/7*2-32.5-67,this.r9.y=330,this.container.addChild(this.r9),this.r10=new egret.Sprite,this.r10.width=65,this.r10.height=73,this.r10.x=this.container.width/7*3-32.5-67,this.r10.y=330,this.container.addChild(this.r10),this.rj=new egret.Sprite,this.rj.width=65,this.rj.height=73,this.rj.x=this.container.width/7*4-32.5-67,this.rj.y=330,this.container.addChild(this.rj),this.rq=new egret.Sprite,this.rq.width=65,this.rq.height=73,this.rq.x=this.container.width/7*5-32.5-67,this.rq.y=330,this.container.addChild(this.rq),this.rk=new egret.Sprite,this.rk.width=65,this.rk.height=73,this.rk.x=this.container.width/7*6-32.5-67,this.rk.y=330,this.container.addChild(this.rk),this.r0=new egret.Sprite,this.r0.width=65,this.r0.height=73,this.r0.x=this.container.width/7*7-32.5-67,this.r0.y=330,this.container.addChild(this.r0),this.rWin=[],this.rLose=[],this.rDraw=[];for(var t=0;7>t;t++){var e=new egret.Bitmap(RES.getRes("card_win_png")),i=new egret.Bitmap(RES.getRes("card_lose_png")),s=new egret.Bitmap(RES.getRes("card_draw_png"));this.rWin.push(e),this.rLose.push(i),this.rDraw.push(s)}this.card8=new egret.Sprite,this.card8.width=100,this.card8.height=140,this.card8.x=this.container.width/7-100-20,this.card8.y=this.container.height-160,this.card8.addEventListener(egret.TouchEvent.TOUCH_TAP,this.card8TouckHandler,this),this.container.addChild(this.card8),this.card8_res_b=new egret.Bitmap(RES.getRes("card_8_b_png")),this.card8_res_r=new egret.Bitmap(RES.getRes("card_8_r_png")),this.card9=new egret.Sprite,this.card9.width=100,this.card9.height=140,this.card9.x=this.container.width/7*2-100-20,this.card9.y=this.container.height-160,this.card9.addEventListener(egret.TouchEvent.TOUCH_TAP,this.card9TouckHandler,this),this.container.addChild(this.card9),this.card9_res_b=new egret.Bitmap(RES.getRes("card_9_b_png")),this.card9_res_r=new egret.Bitmap(RES.getRes("card_9_r_png")),this.card10=new egret.Sprite,this.card10.width=100,this.card10.height=140,this.card10.x=this.container.width/7*3-100-20,this.card10.y=this.container.height-160,this.card10.addEventListener(egret.TouchEvent.TOUCH_TAP,this.card10TouckHandler,this),this.container.addChild(this.card10),this.card10_res_b=new egret.Bitmap(RES.getRes("card_10_b_png")),this.card10_res_r=new egret.Bitmap(RES.getRes("card_10_r_png")),this.cardj=new egret.Sprite,this.cardj.width=100,this.cardj.height=140,this.cardj.x=this.container.width/7*4-100-20,this.cardj.y=this.container.height-160,this.cardj.addEventListener(egret.TouchEvent.TOUCH_TAP,this.cardjTouckHandler,this),this.container.addChild(this.cardj),this.cardj_res_b=new egret.Bitmap(RES.getRes("card_j_b_png")),this.cardj_res_r=new egret.Bitmap(RES.getRes("card_j_r_png")),this.cardq=new egret.Sprite,this.cardq.width=100,this.cardq.height=140,this.cardq.x=this.container.width/7*5-100-20,this.cardq.y=this.container.height-160,this.cardq.addEventListener(egret.TouchEvent.TOUCH_TAP,this.cardqTouckHandler,this),this.container.addChild(this.cardq),this.cardq_res_b=new egret.Bitmap(RES.getRes("card_q_b_png")),this.cardq_res_r=new egret.Bitmap(RES.getRes("card_q_r_png")),this.cardk=new egret.Sprite,this.cardk.width=100,this.cardk.height=140,this.cardk.x=this.container.width/7*6-100-20,this.cardk.y=this.container.height-160,this.cardk.addEventListener(egret.TouchEvent.TOUCH_TAP,this.cardkTouckHandler,this),this.container.addChild(this.cardk),this.cardk_res_b=new egret.Bitmap(RES.getRes("card_k_b_png")),this.cardk_res_r=new egret.Bitmap(RES.getRes("card_k_r_png")),this.card0=new egret.Sprite,this.card0.width=100,this.card0.height=140,this.card0.x=this.container.width/7*7-100-20,this.card0.y=this.container.height-160,this.card0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.card0TouckHandler,this),this.container.addChild(this.card0),this.card0_res_b=new egret.Bitmap(RES.getRes("card_joker_b_png")),this.card0_res_r=new egret.Bitmap(RES.getRes("card_joker_r_png")),this.raiseFlagBtn=new egret.Sprite,this.raiseFlagBtn.width=120,this.raiseFlagBtn.height=120,this.raiseFlagBtn.x=830,this.raiseFlagBtn.y=10,this.raiseFlagBtn.touchEnabled=!0,this.raiseFlagBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.raiseFlagBtnTouchHandler,this),this.container.addChild(this.raiseFlagBtn),this.raiseFlagBtn_res_t=new egret.Bitmap(RES.getRes("raise_flag_t_png")),this.raiseFlagBtn_res_f=new egret.Bitmap(RES.getRes("raise_flag_f_png")),this.raiseFlagBtn.addChild(this.raiseFlagBtn_res_t),this.shouldShowResultPanel=!1,this.resultPanelResult=null,this.resultPanelEnemyReason=null,this.resultPanel=new egret.Sprite,this.resultPanel.width=790,this.resultPanel.height=445,this.resultPanel.x=this.container.width/2-395,this.resultPanel.y=-445,this.resultPanel_res_w=new egret.Bitmap(RES.getRes("result_win_png")),this.resultPanel_res_l=new egret.Bitmap(RES.getRes("result_lose_png")),this.resultPanel_res_d=new egret.Bitmap(RES.getRes("result_draw_png")),this.resultText=new egret.Sprite,this.resultText.width=200,this.resultText.height=100,this.resultText.x=150,this.resultText.y=237,this.resultPanel.addChild(this.resultText),this.resultText_d=new egret.TextField,this.resultText_d.size=30,this.resultText_d.textColor=0,this.resultText_d.textAlign="center",this.resultText_d.text="(邀請已送出)",this.joinFightBtn=new egret.Sprite,this.joinFightBtn.width=280,this.joinFightBtn.height=108,this.joinFightBtn.x=460,this.joinFightBtn.y=287,this.joinFightBtn.touchEnabled=!0,this.joinFightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.joinFightBtnTouchHandler,this),this.resultPanel.addChild(this.joinFightBtn),"ch"==this.p7ws.lang?(this.joinFightBtn_res_t=new egret.Bitmap(RES.getRes("btn_new_b_png")),this.joinFightBtn_res_f=new egret.Bitmap(RES.getRes("btn_new_g_png"))):"en"==this.p7ws.lang&&(this.joinFightBtn_res_t=new egret.Bitmap(RES.getRes("btn_new_b_eng_png")),this.joinFightBtn_res_f=new egret.Bitmap(RES.getRes("btn_new_g_eng_png"))),this.joinFightBtn.addChild(this.joinFightBtn_res_t),this.fightAgainBtn=new egret.Sprite,this.fightAgainBtn.width=280,this.fightAgainBtn.height=108,this.fightAgainBtn.x=100,this.fightAgainBtn.y=287,this.fightAgainBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.fightAgainBtnTouchHandler,this),this.resultPanel.addChild(this.fightAgainBtn),"ch"==this.p7ws.lang?(this.fightAgainBtn_res_t=new egret.Bitmap(RES.getRes("btn_again_b_png")),this.fightAgainBtn_res_f=new egret.Bitmap(RES.getRes("btn_again_g_png"))):"en"==this.p7ws.lang&&(this.fightAgainBtn_res_t=new egret.Bitmap(RES.getRes("btn_again_b_eng_png")),this.fightAgainBtn_res_f=new egret.Bitmap(RES.getRes("btn_again_g_eng_png"))),this.fightAgainBtn.addChild(this.fightAgainBtn_res_t),this.backLoginBtn=new egret.Sprite,this.backLoginBtn.width=280,this.backLoginBtn.height=108,this.backLoginBtn.x=460,this.backLoginBtn.y=100,this.backLoginBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backLoginBtnTouchHandler,this),this.resultPanel.addChild(this.backLoginBtn),"ch"==this.p7ws.lang?(this.backLoginBtn_res_t=new egret.Bitmap(RES.getRes("btn_gomain_b_png")),this.backLoginBtn_res_f=new egret.Bitmap(RES.getRes("btn_gomain_g_png"))):"en"==this.p7ws.lang&&(this.backLoginBtn_res_t=new egret.Bitmap(RES.getRes("btn_gomain_b_eng_png")),this.backLoginBtn_res_f=new egret.Bitmap(RES.getRes("btn_gomain_g_eng_png"))),this.backLoginBtn.addChild(this.backLoginBtn_res_t),this.searchEnemyPanel=new egret.Sprite,this.searchEnemyPanel.width=650,this.searchEnemyPanel.height=365,this.searchEnemyPanel.x=this.container.width/2-325,this.searchEnemyPanel.y=50,"ch"==this.p7ws.lang?this.searchEnemyPanel_res=new egret.Bitmap(RES.getRes("search_enemy_png")):"en"==this.p7ws.lang&&(this.searchEnemyPanel_res=new egret.Bitmap(RES.getRes("search_enemy_eng_png"))),this.searchEnemyPanel.addChild(this.searchEnemyPanel_res),this.cancelBtn=new egret.Sprite,this.cancelBtn.width=280,this.cancelBtn.height=108,this.cancelBtn.x=this.searchEnemyPanel.width/2-140,this.cancelBtn.y=this.searchEnemyPanel.height-this.cancelBtn.height-50,this.cancelBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.cancalBtnTouchHandler,this),"ch"==this.p7ws.lang?(this.cancelBtn_res_t=new egret.Bitmap(RES.getRes("btn_cancel_b_png")),this.cancelBtn_res_f=new egret.Bitmap(RES.getRes("btn_cancel_g_png"))):"en"==this.p7ws.lang&&(this.cancelBtn_res_t=new egret.Bitmap(RES.getRes("btn_cancel_b_eng_png")),this.cancelBtn_res_f=new egret.Bitmap(RES.getRes("btn_cancel_g_eng_png"))),this.searchEnemyPanel.addChild(this.cancelBtn),this.stage.addChild(this.container)},e.prototype.resetToInit=function(){this.chooseCard.removeChildren(),this.lockBtn.touchEnabled=!1,this.lockBtn.removeChildren(),this.lockText.removeChildren(),this.r8.removeChildren(),this.r9.removeChildren(),this.r10.removeChildren(),this.rj.removeChildren(),this.rq.removeChildren(),this.rk.removeChildren(),this.r0.removeChildren(),this.card8.touchEnabled=!1,this.card8.removeChildren(),this.card9.touchEnabled=!1,this.card9.removeChildren(),this.card10.touchEnabled=!1,this.card10.removeChildren(),this.cardj.touchEnabled=!1,this.cardj.removeChildren(),this.cardq.touchEnabled=!1,this.cardq.removeChildren(),this.cardk.touchEnabled=!1,this.cardk.removeChildren(),this.card0.touchEnabled=!1,this.card0.removeChildren(),this.raiseFlagBtn.contains(this.raiseFlagBtn_res_t)||this.raiseFlagBtn.addChild(this.raiseFlagBtn_res_t),this.raiseFlagBtn.contains(this.raiseFlagBtn_res_f)&&this.raiseFlagBtn.removeChild(this.raiseFlagBtn_res_f),this.shouldShowResultPanel=!1,this.resultPanelResult=null,this.resultPanelEnemyReason=null,this.resultPanel.y=-445,this.container.contains(this.resultPanel)&&this.container.removeChild(this.resultPanel),this.resultPanel.contains(this.resultPanel_res_w)&&this.resultPanel.removeChild(this.resultPanel_res_w),this.resultPanel.contains(this.resultPanel_res_l)&&this.resultPanel.removeChild(this.resultPanel_res_l),this.resultPanel.contains(this.resultPanel_res_d)&&this.resultPanel.removeChild(this.resultPanel_res_d),this.resultText.contains(this.resultText_d)&&this.resultText.removeChild(this.resultText_d),this.resultText_d.text="(邀請已送出)",this.joinFightBtn.contains(this.joinFightBtn_res_t)||this.joinFightBtn.addChild(this.joinFightBtn_res_t),this.joinFightBtn.contains(this.joinFightBtn_res_f)&&this.joinFightBtn.removeChild(this.joinFightBtn_res_f),this.fightAgainBtn.contains(this.fightAgainBtn_res_t)||this.fightAgainBtn.addChild(this.fightAgainBtn_res_t),this.fightAgainBtn.contains(this.fightAgainBtn_res_f)&&this.fightAgainBtn.removeChild(this.fightAgainBtn_res_f),this.backLoginBtn.contains(this.backLoginBtn_res_t)||this.backLoginBtn.addChild(this.backLoginBtn_res_t),this.backLoginBtn.contains(this.backLoginBtn_res_f)&&this.backLoginBtn.removeChild(this.backLoginBtn_res_f),this.container.contains(this.searchEnemyPanel)&&this.container.removeChild(this.searchEnemyPanel)},e.prototype.raiseFlagBtnTouchHandler=function(){this.closeTouchAllCard(),this.raiseFlagBtn.addChild(this.raiseFlagBtn_res_f),this.raiseFlagBtn.removeChild(this.raiseFlagBtn_res_t);var t=MessageTool.getPoke7Message("RAISE_FLAG","none");this.p7ws.ws.writeUTF(t)},e.prototype.joinFightBtnTouchHandler=function(){this.joinFightBtn.touchEnabled=!1,this.joinFightBtn.addChild(this.joinFightBtn_res_f),this.joinFightBtn.removeChild(this.joinFightBtn_res_t),this.container.addChild(this.searchEnemyPanel),this.cancelBtn.touchEnabled=!0,this.cancelBtn.addChild(this.cancelBtn_res_t),this.cancelBtn.contains(this.cancelBtn_res_f)&&this.cancelBtn.removeChild(this.cancelBtn_res_f),this.backLoginBtn.touchEnabled=!1,this.fightAgainBtn.touchEnabled=!1,this.fightAgainBtn.contains(this.fightAgainBtn_res_f)||this.fightAgainBtn.addChild(this.fightAgainBtn_res_f),this.fightAgainBtn.contains(this.fightAgainBtn_res_t)&&this.fightAgainBtn.removeChild(this.fightAgainBtn_res_t);var t=MessageTool.getPoke7Message("JOIN_FIGHT","none");this.p7ws.ws.writeUTF(t)},e.prototype.cancalBtnTouchHandler=function(){this.cancelBtn.touchEnabled=!1,this.cancelBtn.addChild(this.cancelBtn_res_f),this.cancelBtn.removeChild(this.cancelBtn_res_t);var t=MessageTool.getPoke7Message("CANCEL_JOIN_FIGHT","none");this.p7ws.ws.writeUTF(t)},e.prototype.backLoginBtnTouchHandler=function(){var t=this;this.backLoginBtn.touchEnabled=!1,this.joinFightBtn.touchEnabled=!1,this.fightAgainBtn.touchEnabled=!1;var e=MessageTool.getPoke7Message("BACK_LOGIN","none");this.p7ws.ws.writeUTF(e);var i=egret.Tween.get(this.container);i.to({y:-this.container.height},500,egret.Ease.quadOut),i.call(function(){t.resetToInit(),t.parent.stage.removeChild(t),t.p7ws.ls.resetToInit()},this)},e.prototype.fightAgainBtnTouchHandler=function(){this.fightAgainBtn.touchEnabled=!1,this.fightAgainBtn.contains(this.fightAgainBtn_res_f)||this.fightAgainBtn.addChild(this.fightAgainBtn_res_f),this.fightAgainBtn.contains(this.fightAgainBtn_res_t)&&this.fightAgainBtn.removeChild(this.fightAgainBtn_res_t);var t=MessageTool.getPoke7Message("FIGHT_AGAIN","none");this.p7ws.ws.writeUTF(t)},e.prototype.lockCardBtnTouchHandler=function(){this.p7ws.vt.playVoiceLock(),this.closeTouchAllCard(),this.lockBtn.touchEnabled=!1,this.lockBtn.addChild(this.lockBtn_res_f),this.lockBtn.removeChild(this.lockBtn_res_t),this.p7ws.ws.writeUTF(this.lockCardMessage)},e.prototype.card8TouckHandler=function(){this.p7ws.vt.playChooseCard(),this.lockCardMessage=MessageTool.getPoke7Message("LOCK_CARD","8"),this.chooseCard.removeChildren(),"p1"==this.pOrder?this.chooseCard.addChild(this.chooseCard_res_b[0]):"p2"==this.pOrder&&this.chooseCard.addChild(this.chooseCard_res_r[0]),this.lockBtn.contains(this.lockBtn_res_t)||this.lockBtn.addChild(this.lockBtn_res_t),this.closeTouchAllCard(),this.openTouchSomeCard(),this.card8.touchEnabled=!1,this.lockBtn.touchEnabled=!0},e.prototype.card9TouckHandler=function(){this.p7ws.vt.playChooseCard(),this.lockCardMessage=MessageTool.getPoke7Message("LOCK_CARD","9"),this.chooseCard.removeChildren(),"p1"==this.pOrder?this.chooseCard.addChild(this.chooseCard_res_b[1]):"p2"==this.pOrder&&this.chooseCard.addChild(this.chooseCard_res_r[1]),this.lockBtn.contains(this.lockBtn_res_t)||this.lockBtn.addChild(this.lockBtn_res_t),this.closeTouchAllCard(),this.openTouchSomeCard(),this.card9.touchEnabled=!1,this.lockBtn.touchEnabled=!0},e.prototype.card10TouckHandler=function(){this.p7ws.vt.playChooseCard(),this.lockCardMessage=MessageTool.getPoke7Message("LOCK_CARD","10"),this.chooseCard.removeChildren(),"p1"==this.pOrder?this.chooseCard.addChild(this.chooseCard_res_b[2]):"p2"==this.pOrder&&this.chooseCard.addChild(this.chooseCard_res_r[2]),this.lockBtn.contains(this.lockBtn_res_t)||this.lockBtn.addChild(this.lockBtn_res_t),this.closeTouchAllCard(),this.openTouchSomeCard(),this.card10.touchEnabled=!1,this.lockBtn.touchEnabled=!0},e.prototype.cardjTouckHandler=function(){this.p7ws.vt.playChooseCard(),this.lockCardMessage=MessageTool.getPoke7Message("LOCK_CARD","11"),this.chooseCard.removeChildren(),"p1"==this.pOrder?this.chooseCard.addChild(this.chooseCard_res_b[3]):"p2"==this.pOrder&&this.chooseCard.addChild(this.chooseCard_res_r[3]),this.lockBtn.contains(this.lockBtn_res_t)||this.lockBtn.addChild(this.lockBtn_res_t),this.closeTouchAllCard(),this.openTouchSomeCard(),this.cardj.touchEnabled=!1,this.lockBtn.touchEnabled=!0},e.prototype.cardqTouckHandler=function(){this.p7ws.vt.playChooseCard(),this.lockCardMessage=MessageTool.getPoke7Message("LOCK_CARD","12"),this.chooseCard.removeChildren(),"p1"==this.pOrder?this.chooseCard.addChild(this.chooseCard_res_b[4]):"p2"==this.pOrder&&this.chooseCard.addChild(this.chooseCard_res_r[4]),this.lockBtn.contains(this.lockBtn_res_t)||this.lockBtn.addChild(this.lockBtn_res_t),this.closeTouchAllCard(),this.openTouchSomeCard(),this.cardq.touchEnabled=!1,this.lockBtn.touchEnabled=!0},e.prototype.cardkTouckHandler=function(){this.p7ws.vt.playChooseCard(),this.lockCardMessage=MessageTool.getPoke7Message("LOCK_CARD","13"),this.chooseCard.removeChildren(),"p1"==this.pOrder?this.chooseCard.addChild(this.chooseCard_res_b[5]):"p2"==this.pOrder&&this.chooseCard.addChild(this.chooseCard_res_r[5]),this.lockBtn.contains(this.lockBtn_res_t)||this.lockBtn.addChild(this.lockBtn_res_t),this.closeTouchAllCard(),this.openTouchSomeCard(),this.cardk.touchEnabled=!1,this.lockBtn.touchEnabled=!0},e.prototype.card0TouckHandler=function(){this.p7ws.vt.playChooseCard(),this.lockCardMessage=MessageTool.getPoke7Message("LOCK_CARD","0"),this.chooseCard.removeChildren(),"p1"==this.pOrder?this.chooseCard.addChild(this.chooseCard_res_b[6]):"p2"==this.pOrder&&this.chooseCard.addChild(this.chooseCard_res_r[6]),this.lockBtn.contains(this.lockBtn_res_t)||this.lockBtn.addChild(this.lockBtn_res_t),this.closeTouchAllCard(),this.openTouchSomeCard(),this.card0.touchEnabled=!1,this.lockBtn.touchEnabled=!0},e.prototype.closeTouchAllCard=function(){this.lockBtn.touchEnabled=!1,this.card8.touchEnabled=!1,this.card9.touchEnabled=!1,this.card10.touchEnabled=!1,this.cardj.touchEnabled=!1,this.cardq.touchEnabled=!1,this.cardk.touchEnabled=!1,this.card0.touchEnabled=!1},e.prototype.openTouchSomeCard=function(){0==this.r8.numChildren&&(this.card8.touchEnabled=!0),0==this.r9.numChildren&&(this.card9.touchEnabled=!0),0==this.r10.numChildren&&(this.card10.touchEnabled=!0),0==this.rj.numChildren&&(this.cardj.touchEnabled=!0),0==this.rq.numChildren&&(this.cardq.touchEnabled=!0),0==this.rk.numChildren&&(this.cardk.touchEnabled=!0),0==this.r0.numChildren&&(this.card0.touchEnabled=!0),this.container.contains(this.resultPanel)||(this.raiseFlagBtn.touchEnabled=!0)},e.prototype.showCardByPOrder=function(){"p1"==this.pOrder?(this.card8.addChild(this.card8_res_b),this.card9.addChild(this.card9_res_b),this.card10.addChild(this.card10_res_b),this.cardj.addChild(this.cardj_res_b),this.cardq.addChild(this.cardq_res_b),this.cardk.addChild(this.cardk_res_b),this.card0.addChild(this.card0_res_b)):"p2"==this.pOrder&&(this.card8.addChild(this.card8_res_r),this.card9.addChild(this.card9_res_r),this.card10.addChild(this.card10_res_r),this.cardj.addChild(this.cardj_res_r),this.cardq.addChild(this.cardq_res_r),this.cardk.addChild(this.cardk_res_r),this.card0.addChild(this.card0_res_r))},e.prototype.setResultBitMapFromString=function(t,e){if("WIN"==t)switch(e){case"8":this.r8.addChild(this.rWin[0]);break;case"9":this.r9.addChild(this.rWin[1]);break;case"10":this.r10.addChild(this.rWin[2]);break;case"11":this.rj.addChild(this.rWin[3]);break;case"12":this.rq.addChild(this.rWin[4]);break;case"13":this.rk.addChild(this.rWin[5]);break;case"0":this.r0.addChild(this.rWin[6])}else if("LOSE"==t)switch(e){case"8":this.r8.addChild(this.rLose[0]);break;case"9":this.r9.addChild(this.rLose[1]);break;case"10":this.r10.addChild(this.rLose[2]);break;case"11":this.rj.addChild(this.rLose[3]);break;case"12":this.rq.addChild(this.rLose[4]);break;case"13":this.rk.addChild(this.rLose[5]);break;case"0":this.r0.addChild(this.rLose[6])}else if("DRAW"==t)switch(e){case"8":this.r8.addChild(this.rDraw[0]);break;case"9":this.r9.addChild(this.rDraw[1]);break;case"10":this.r10.addChild(this.rDraw[2]);break;case"11":this.rj.addChild(this.rDraw[3]);break;case"12":this.rq.addChild(this.rDraw[4]);break;case"13":this.rk.addChild(this.rDraw[5]);break;case"0":this.r0.addChild(this.rDraw[6])}},e}(egret.Stage);__reflect(FightScene.prototype,"FightScene");var LangScene=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.container=new egret.Sprite,this.container.width=960,this.container.height=540,this.bg=new egret.Bitmap(RES.getRes("choose_lang_png")),this.container.addChild(this.bg),this.chineseBtn=new egret.Sprite,this.chineseBtn.width=280,this.chineseBtn.height=108,this.chineseBtn.x=180,this.chineseBtn.y=300,this.chineseBtn.touchEnabled=!0,this.chineseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chineseBtnTouchHandler,this),this.container.addChild(this.chineseBtn),this.chineseBtn_res=new egret.Bitmap(RES.getRes("btn_chinese_png")),this.chineseBtn.addChild(this.chineseBtn_res),this.englishBtn=new egret.Sprite,this.englishBtn.width=280,this.englishBtn.height=108,this.englishBtn.x=500,this.englishBtn.y=300,this.englishBtn.touchEnabled=!0,this.englishBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.englishBtnTouchHandler,this),this.container.addChild(this.englishBtn),this.englishBtn_res=new egret.Bitmap(RES.getRes("btn_english_png")),this.englishBtn.addChild(this.englishBtn_res),this.stage.addChild(this.container)},e.prototype.chineseBtnTouchHandler=function(){this.chineseBtn.touchEnabled=!1;var t=new Poke7Ws("ch"),e=new MainScene(t),i=new LoginScene(t),s=new FightScene(t),n=new CheckScene(t),h=new VoiceTool;t.setScenes(e,i,s,n,h),this.parent.stage.addChild(t.ms),this.parent.removeChild(this)},e.prototype.englishBtnTouchHandler=function(){this.chineseBtn.touchEnabled=!1;var t=new Poke7Ws("en"),e=new MainScene(t),i=new LoginScene(t),s=new FightScene(t),n=new CheckScene(t),h=new VoiceTool;t.setScenes(e,i,s,n,h),this.parent.stage.addChild(t.ms),this.parent.removeChild(this)},e}(egret.Stage);__reflect(LangScene.prototype,"LangScene");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var LoginScene=function(t){function e(e){var i=t.call(this)||this;return i.p7ws=e,i.init(),i}return __extends(e,t),e.prototype.init=function(){this.container=new egret.Sprite,this.container.width=960,this.container.height=540,this.bg=new egret.Bitmap(RES.getRes("login_bg_png")),this.container.addChild(this.bg),this.joinFightBtn=new egret.Sprite,this.joinFightBtn.width=280,this.joinFightBtn.height=108,this.joinFightBtn.x=this.container.width/2-140,this.joinFightBtn.y=this.container.height/3-this.joinFightBtn.height,this.joinFightBtn.touchEnabled=!0,this.joinFightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.joinFightBtnTouchHandler,this),"ch"==this.p7ws.lang?(this.joinFightBtn_res_t=new egret.Bitmap(RES.getRes("btn_new_b_png")),this.joinFightBtn_res_f=new egret.Bitmap(RES.getRes("btn_new_g_png"))):"en"==this.p7ws.lang&&(this.joinFightBtn_res_t=new egret.Bitmap(RES.getRes("btn_new_b_eng_png")),this.joinFightBtn_res_f=new egret.Bitmap(RES.getRes("btn_new_g_eng_png"))),this.joinFightBtn.addChild(this.joinFightBtn_res_t),this.container.addChild(this.joinFightBtn),this.searchEnemyPanel=new egret.Sprite,this.searchEnemyPanel.width=650,this.searchEnemyPanel.height=365,this.searchEnemyPanel.x=this.container.width/2-325,this.searchEnemyPanel.y=50,"ch"==this.p7ws.lang?this.searchEnemyPanel_res=new egret.Bitmap(RES.getRes("search_enemy_png")):"en"==this.p7ws.lang&&(this.searchEnemyPanel_res=new egret.Bitmap(RES.getRes("search_enemy_eng_png"))),this.searchEnemyPanel.addChild(this.searchEnemyPanel_res),this.cancelBtn=new egret.Sprite,this.cancelBtn.width=280,this.cancelBtn.height=108,this.cancelBtn.x=this.searchEnemyPanel.width/2-140,this.cancelBtn.y=this.searchEnemyPanel.height-this.cancelBtn.height-50,this.cancelBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.cancalBtnTouchHandler,this),"ch"==this.p7ws.lang?(this.cancelBtn_res_t=new egret.Bitmap(RES.getRes("btn_cancel_b_png")),this.cancelBtn_res_f=new egret.Bitmap(RES.getRes("btn_cancel_g_png"))):"en"==this.p7ws.lang&&(this.cancelBtn_res_t=new egret.Bitmap(RES.getRes("btn_cancel_b_eng_png")),this.cancelBtn_res_f=new egret.Bitmap(RES.getRes("btn_cancel_g_eng_png"))),this.searchEnemyPanel.addChild(this.cancelBtn),this.onlineNumber=new egret.Sprite,this.onlineNumber.width=200,this.onlineNumber.height=100,this.onlineNumber.x=740,this.onlineNumber.y=20,this.container.addChild(this.onlineNumber),this.onlineNumber_d=new egret.TextField,this.onlineNumber_d.textColor=5605546,this.onlineNumber_d.size=30,"ch"==this.p7ws.lang?this.onlineNumber_d.text="線上人數: ":"en"==this.p7ws.lang&&(this.onlineNumber_d.text="Online: "),this.onlineNumber.addChild(this.onlineNumber_d),this.voiceIcon=new egret.Sprite,this.voiceIcon.width=120,this.voiceIcon.height=120,this.voiceIcon.x=20,this.voiceIcon.y=this.container.height-140,this.voiceIcon.touchEnabled=!0,this.voiceIcon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.voiceIconTouchHandler,this),this.container.addChild(this.voiceIcon),this.voiceIcon_res_t=new egret.Bitmap(RES.getRes("btn_voice_t_png")),this.voiceIcon_res_f=new egret.Bitmap(RES.getRes("btn_voice_f_png")),this.voiceIcon.addChild(this.voiceIcon_res_t),this.guideBtn=new egret.Sprite,this.guideBtn.width=280,this.guideBtn.height=108,this.guideBtn.x=this.container.width/2-140,this.guideBtn.y=this.container.height/3*2-this.guideBtn.height,this.guideBtn.touchEnabled=!0,this.guideBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.guideBtnTouchHandler,this),this.container.addChild(this.guideBtn),"ch"==this.p7ws.lang?this.guideBtn_res=new egret.Bitmap(RES.getRes("btn_guide_png")):"en"==this.p7ws.lang&&(this.guideBtn_res=new egret.Bitmap(RES.getRes("btn_guide_eng_png"))),this.guideBtn.addChild(this.guideBtn_res),this.guidePanel=new egret.Sprite,this.guidePanel.width=790,this.guidePanel.height=445,this.guidePanel.x=this.container.width/2-395,this.guidePanel.y=this.container.height/2-222.5,this.guidePanel_res=new egret.Bitmap(RES.getRes("guide_png")),this.guidePanel.addChild(this.guidePanel_res),this.closeGuidePanelBtn=new egret.Sprite,this.closeGuidePanelBtn.width=280,this.closeGuidePanelBtn.height=108,this.closeGuidePanelBtn.x=470,this.closeGuidePanelBtn.y=295,this.closeGuidePanelBtn.touchEnabled=!1,this.closeGuidePanelBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeGuidePanelBtnTouchHandlder,this),this.guidePanel.addChild(this.closeGuidePanelBtn),"ch"==this.p7ws.lang?this.closeGuidePanelBtn_res=new egret.Bitmap(RES.getRes("btn_close_png")):"en"==this.p7ws.lang&&(this.closeGuidePanelBtn_res=new egret.Bitmap(RES.getRes("btn_close_eng_png"))),this.closeGuidePanelBtn.addChild(this.closeGuidePanelBtn_res),this.stage.addChild(this.container)
},e.prototype.resetToInit=function(){this.joinFightBtn.touchEnabled=!0,this.joinFightBtn.contains(this.joinFightBtn_res_t)||this.joinFightBtn.addChild(this.joinFightBtn_res_t),this.joinFightBtn.contains(this.joinFightBtn_res_f)&&this.joinFightBtn.removeChild(this.joinFightBtn_res_f),this.container.contains(this.searchEnemyPanel)&&this.container.removeChild(this.searchEnemyPanel),this.cancelBtn.touchEnabled=!0,this.cancelBtn.contains(this.cancelBtn_res_t)||this.cancelBtn.addChild(this.cancelBtn_res_t),this.cancelBtn.contains(this.cancelBtn_res_f)&&this.cancelBtn.removeChild(this.cancelBtn_res_f),this.voiceIcon.touchEnabled=!0,this.guideBtn.touchEnabled=!0,this.container.contains(this.guidePanel)&&this.container.removeChild(this.guidePanel),this.closeGuidePanelBtn.touchEnabled=!1},e.prototype.closeAllActive=function(){this.joinFightBtn.touchEnabled=!1,this.cancelBtn.touchEnabled=!1,this.voiceIcon.touchEnabled=!1,this.guideBtn.touchEnabled=!1,this.closeGuidePanelBtn.touchEnabled=!1},e.prototype.joinFightBtnTouchHandler=function(){this.closeAllActive(),this.joinFightBtn.addChild(this.joinFightBtn_res_f),this.joinFightBtn.removeChild(this.joinFightBtn_res_t),this.container.addChild(this.searchEnemyPanel),this.cancelBtn.touchEnabled=!0,this.cancelBtn.addChild(this.cancelBtn_res_t),this.cancelBtn.contains(this.cancelBtn_res_f)&&this.cancelBtn.removeChild(this.cancelBtn_res_f);var t=MessageTool.getPoke7Message("JOIN_FIGHT","none");this.p7ws.ws.writeUTF(t)},e.prototype.cancalBtnTouchHandler=function(){this.cancelBtn.touchEnabled=!1,this.cancelBtn.addChild(this.cancelBtn_res_f),this.cancelBtn.removeChild(this.cancelBtn_res_t);var t=MessageTool.getPoke7Message("CANCEL_JOIN_FIGHT","none");this.p7ws.ws.writeUTF(t)},e.prototype.voiceIconTouchHandler=function(){this.voiceIcon.contains(this.voiceIcon_res_t)?(this.p7ws.vt.stopAllVoice(),this.voiceIcon.addChild(this.voiceIcon_res_f),this.voiceIcon.removeChild(this.voiceIcon_res_t)):this.voiceIcon.contains(this.voiceIcon_res_f)&&(this.p7ws.vt.startAllVoice(),this.voiceIcon.addChild(this.voiceIcon_res_t),this.voiceIcon.removeChild(this.voiceIcon_res_f))},e.prototype.guideBtnTouchHandler=function(){this.closeAllActive(),this.closeGuidePanelBtn.touchEnabled=!0,this.container.contains(this.guidePanel)||this.container.addChild(this.guidePanel)},e.prototype.closeGuidePanelBtnTouchHandlder=function(){this.resetToInit()},e}(egret.Stage);__reflect(LoginScene.prototype,"LoginScene");var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("main_scene")},e.prototype.onResourceLoadComplete=function(t){"main_scene"==t.groupName?RES.loadGroup("login_scene"):"login_scene"==t.groupName?RES.loadGroup("fight_scene"):"fight_scene"==t.groupName?RES.loadGroup("check_scene"):"check_scene"==t.groupName?RES.loadGroup("voice"):"voice"==t.groupName?RES.loadGroup("language"):"language"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.createGameScene=function(){var t=new LangScene;this.stage.addChild(t)},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var MainScene=function(t){function e(e){var i=t.call(this)||this;return i.p7ws=e,i.init(),i}return __extends(e,t),e.prototype.init=function(){this.container=new egret.Sprite,this.container.width=960,this.container.height=540,this.bg_res=new egret.Bitmap(RES.getRes("main_bg_png")),this.container.addChild(this.bg_res),this.loginBtn=new egret.Sprite,this.loginBtn.width=280,this.loginBtn.height=108,this.loginBtn.x=this.container.width/2-140,this.loginBtn.y=this.container.height-this.loginBtn.height-50,this.loginBtn.touchEnabled=!0,this.loginBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.loginBtnTouchHandler,this),"ch"==this.p7ws.lang?(this.loginBtn_res_t=new egret.Bitmap(RES.getRes("btn_login_b_png")),this.loginBtn_res_f=new egret.Bitmap(RES.getRes("btn_login_g_png"))):"en"==this.p7ws.lang&&(this.loginBtn_res_t=new egret.Bitmap(RES.getRes("btn_login_b_eng_png")),this.loginBtn_res_f=new egret.Bitmap(RES.getRes("btn_login_g_eng_png"))),this.loginBtn.addChild(this.loginBtn_res_t),this.container.addChild(this.loginBtn),this.stage.addChild(this.container)},e.prototype.resetToInit=function(){this.loginBtn.touchEnabled=!0,this.loginBtn.contains(this.loginBtn_res_t)||this.loginBtn.addChild(this.loginBtn_res_t),this.loginBtn.contains(this.loginBtn_res_f)&&this.loginBtn.removeChild(this.loginBtn_res_f)},e.prototype.loginBtnTouchHandler=function(){this.loginBtn.touchEnabled=!1,this.loginBtn.addChild(this.loginBtn_res_f),this.loginBtn.removeChild(this.loginBtn_res_t),this.p7ws.connectToServer()},e}(egret.Stage);__reflect(MainScene.prototype,"MainScene");var MessageTool=function(){function t(){}return t.getPoke7Message=function(t,e){var i={action:t,data:e};return JSON.stringify(i)},t}();__reflect(MessageTool.prototype,"MessageTool");var Poke7Ws=function(){function t(t){this.lang=t,this.ws=new egret.WebSocket,this.ws.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onMessageHandler,this),this.ws.addEventListener(egret.Event.CLOSE,this.connectionCloseHandler,this),this.ws.addEventListener(egret.IOErrorEvent.IO_ERROR,this.connectionErrorHandler,this)}return t.prototype.connectionCloseHandler=function(){this.ls.resetToInit(),this.fs.resetToInit(),this.cs.resetToInit(),this.ms.parent.contains(this.ls)&&this.ms.parent.stage.removeChild(this.ls),this.ms.parent.contains(this.fs)&&this.ms.parent.stage.removeChild(this.fs),this.ms.parent.contains(this.cs)&&this.ms.parent.stage.removeChild(this.cs),this.ms.resetToInit()},t.prototype.connectionErrorHandler=function(){this.ls.resetToInit(),this.fs.resetToInit(),this.cs.resetToInit(),this.ms.parent.contains(this.ls)&&this.ms.parent.stage.removeChild(this.ls),this.ms.parent.contains(this.fs)&&this.ms.parent.stage.removeChild(this.fs),this.ms.parent.contains(this.cs)&&this.ms.parent.stage.removeChild(this.cs),this.ms.resetToInit(),alert("伺服器維護中...")},t.prototype.connectToServer=function(){this.ws.connectByUrl("ws://220.132.173.47:8080/poke7server/poke7server")},t.prototype.setScenes=function(t,e,i,s,n){this.ms=t,this.ls=e,this.fs=i,this.cs=s,this.vt=n},t.prototype.onMessageHandler=function(t){var e=this,i=JSON.parse(this.ws.readUTF());switch(i.action){case"LOGIN":if(this.ms.parent){var s=egret.Tween.get(this.ls.container);s.set({y:-this.ls.container.height}),s.to({y:0},500,egret.Ease.quadOut),this.ms.parent.stage.addChild(this.ls),this.vt.playVoiceBg()}break;case"ONLINE_NUMBER":"ch"==this.lang?this.ls.onlineNumber_d.text="線上人數: "+i.data:"en"==this.lang&&(this.ls.onlineNumber_d.text="Online: "+i.data);break;case"CANCEL_JOIN_SUCCESS":this.ms.parent.contains(this.fs)?(this.fs.backLoginBtn.touchEnabled=!0,this.fs.container.removeChild(this.fs.searchEnemyPanel),this.fs.joinFightBtn.touchEnabled=!0,this.fs.joinFightBtn.addChild(this.fs.joinFightBtn_res_t),this.fs.joinFightBtn.removeChild(this.fs.joinFightBtn_res_f)):this.ls.resetToInit();break;case"BEGIN_FIGHT":if(this.ls.closeAllActive(),this.ms.parent)if(this.ms.parent.contains(this.fs))this.fs.resetToInit(),this.fs.pOrder=i.data,this.fs.openTouchSomeCard(),this.fs.showCardByPOrder();else{var s=egret.Tween.get(this.fs.container);s.set({y:-this.fs.container.height}),s.to({y:0},500,egret.Ease.quadOut),this.fs.resetToInit(),this.fs.pOrder=i.data,this.fs.openTouchSomeCard(),this.fs.showCardByPOrder(),this.ms.parent.stage.addChild(this.fs)}break;case"ENEMY_LOCK_CARD":"ch"==this.lang?this.fs.lockText_d.text="(對手已出牌)":"en"==this.lang&&(this.fs.lockText_d.text="(enemy locked)"),this.fs.lockText.contains(this.fs.lockText_d)||this.fs.lockText.addChild(this.fs.lockText_d);break;case"YOU_WIN":if(this.ms.parent.contains(this.cs))this.fs.shouldShowResultPanel=!0,this.fs.resultPanelResult="WIN",this.fs.resultPanelEnemyReason=i.data;else{this.fs.closeTouchAllCard(),this.fs.raiseFlagBtn.touchEnabled=!1,this.fs.resultPanel.addChildAt(this.fs.resultPanel_res_w,0);var s=egret.Tween.get(this.fs.resultPanel);s.set({y:-445}),s.to({y:this.fs.container.height/2-222.5},500,egret.Ease.quadOut),s.call(function(){"ENEMY_JUMP"==i.data?("ch"==e.lang?e.fs.resultText_d.text="(對手已逃走)":"en"==e.lang&&(e.fs.resultText_d.text="(enemy run away)"),e.fs.resultText.addChild(e.fs.resultText_d),e.fs.fightAgainBtn.touchEnabled=!1,e.fs.fightAgainBtn.contains(e.fs.fightAgainBtn_res_f)||e.fs.fightAgainBtn.addChild(e.fs.fightAgainBtn_res_f),e.fs.fightAgainBtn.contains(e.fs.fightAgainBtn_res_t)&&e.fs.fightAgainBtn.removeChild(e.fs.fightAgainBtn_res_t),e.fs.backLoginBtn.touchEnabled=!0,e.fs.joinFightBtn.touchEnabled=!0):"RAISE_FLAG"==i.data?("ch"==e.lang?e.fs.resultText_d.text="(對手已投降)":"en"==e.lang&&(e.fs.resultText_d.text="(enemy yield)"),e.fs.resultText.addChild(e.fs.resultText_d),e.fs.fightAgainBtn.touchEnabled=!0,e.fs.backLoginBtn.touchEnabled=!0,e.fs.joinFightBtn.touchEnabled=!0):(e.fs.fightAgainBtn.touchEnabled=!0,e.fs.backLoginBtn.touchEnabled=!0,e.fs.joinFightBtn.touchEnabled=!0)},this),this.fs.container.addChild(this.fs.resultPanel)}break;case"YOU_LOSE":if(this.ms.parent.contains(this.cs))this.fs.shouldShowResultPanel=!0,this.fs.resultPanelResult="LOSE";else{this.fs.closeTouchAllCard(),this.fs.raiseFlagBtn.touchEnabled=!1,this.fs.resultPanel.addChildAt(this.fs.resultPanel_res_l,0);var s=egret.Tween.get(this.fs.resultPanel);s.set({y:-445}),s.to({y:this.fs.container.height/2-222.5},500,egret.Ease.quadOut),s.call(function(){e.fs.fightAgainBtn.touchEnabled=!0,e.fs.backLoginBtn.touchEnabled=!0,e.fs.joinFightBtn.touchEnabled=!0},this),this.fs.container.addChild(this.fs.resultPanel)}break;case"YOU_DRAW":if(this.ms.parent.contains(this.cs))this.fs.shouldShowResultPanel=!0,this.fs.resultPanelResult="DRAW";else{this.fs.closeTouchAllCard(),this.fs.raiseFlagBtn.touchEnabled=!1,this.fs.resultPanel.addChildAt(this.fs.resultPanel_res_d,0);var s=egret.Tween.get(this.fs.resultPanel);s.set({y:-445}),s.to({y:this.fs.container.height/2-222.5},500,egret.Ease.quadOut),s.call(function(){e.fs.fightAgainBtn.touchEnabled=!0,e.fs.backLoginBtn.touchEnabled=!0,e.fs.joinFightBtn.touchEnabled=!0},this),this.fs.container.addChild(this.fs.resultPanel)}break;case"ENEMY_LEAVE":this.ms.parent.contains(this.fs)&&("ch"==this.lang?this.fs.resultText_d.text="(對方已離開)":"en"==this.lang&&(this.fs.resultText_d.text="(enemy leave)"),this.fs.resultText.contains(this.fs.resultText_d)||this.fs.resultText.addChild(this.fs.resultText_d),this.fs.fightAgainBtn.touchEnabled=!1,this.fs.fightAgainBtn.contains(this.fs.fightAgainBtn_res_f)||this.fs.fightAgainBtn.addChild(this.fs.fightAgainBtn_res_f),this.fs.fightAgainBtn.contains(this.fs.fightAgainBtn_res_t)&&this.fs.fightAgainBtn.removeChild(this.fs.fightAgainBtn_res_t));break;case"ENEMY_ACCEPT":this.ms.parent.contains(this.fs)&&("ch"==this.lang?this.fs.resultText_d.text="(對方再挑戰)":"en"==this.lang&&(this.fs.resultText_d.text="(enemy again)"),this.fs.resultText.contains(this.fs.resultText_d)||this.fs.resultText.addChild(this.fs.resultText_d));break;case"BEGIN_CHECK":this.fs.raiseFlagBtn.touchEnabled=!1;var n=i.data.split("-");this.cs.cardData=n;var h=this.cs.getCardResFromString(n[0],n[1]),r=this.cs.getCardResFromString(n[2],n[3]),a=egret.Tween.get(this.cs.container);a.set({y:-this.cs.container.height}),a.to({y:0},500,egret.Ease.quadOut),a.call(function(){var t=egret.Tween.get(e.cs.p1Card);t.set({x:135,alpha:.01}),t.to({x:235,alpha:1},1e3,egret.Ease.backOut);var i=egret.Tween.get(e.cs.p2Card);i.set({x:650,alpha:.01}),i.to({x:550,alpha:1},1e3,egret.Ease.backOut),i.call(function(){e.cs.cardAnimationEnd=!0;var t;1==e.cs.resultAnimationReady&&("WIN"==e.cs.resultCheck?"p1"==e.fs.pOrder?(e.vt.playVoiceWin(),t=egret.Tween.get(e.cs.p1Result),t.set({y:67.5,alpah:.01}),t.to({y:117.5,alpha:1},1e3,egret.Ease.quadOut),e.cs.container.addChild(e.cs.p1Result),e.cs.p1Result.addChild(e.cs.p1Result_res_w)):"p2"==e.fs.pOrder&&(e.vt.playVoiceWin(),t=egret.Tween.get(e.cs.p2Result),t.set({y:67.5,alpah:.01}),t.to({y:117.5,alpha:1},1e3,egret.Ease.quadOut),e.cs.container.addChild(e.cs.p2Result),e.cs.p2Result.addChild(e.cs.p2Result_res_w)):"LOSE"==e.cs.resultCheck?"p1"==e.fs.pOrder?(e.vt.playVoiceWin(),t=egret.Tween.get(e.cs.p2Result),t.set({y:67.5,alpah:.01}),t.to({y:117.5,alpha:1},1e3,egret.Ease.quadOut),e.cs.container.addChild(e.cs.p2Result),e.cs.p2Result.addChild(e.cs.p2Result_res_w)):"p2"==e.fs.pOrder&&(e.vt.playVoiceWin(),t=egret.Tween.get(e.cs.p1Result),t.set({y:67.5,alpah:.01}),t.to({y:117.5,alpha:1},1e3,egret.Ease.quadOut),e.cs.container.addChild(e.cs.p1Result),e.cs.p1Result.addChild(e.cs.p1Result_res_w)):"DRAW"==e.cs.resultCheck&&(e.vt.playVoiceWin(),t=egret.Tween.get(e.cs.resultDraw),t.set({y:67.5,alpah:.01}),t.to({y:117.5,alpha:1},1e3,egret.Ease.quadOut),e.cs.container.addChild(e.cs.resultDraw),e.cs.resultDraw.addChild(e.cs.resultDraw_res))),t.call(function(){e.cs.resultAnimationEnd=!0,"p1"==e.fs.pOrder?e.fs.setResultBitMapFromString(e.cs.resultCheck,n[1]):"p2"==e.fs.pOrder&&e.fs.setResultBitMapFromString(e.cs.resultCheck,n[3]);var t=egret.Tween.get(e.cs.container);t.to({y:-960},500,egret.Ease.quadIn),t.call(function(){if(e.cs.checkAnimationEnd=!0,e.cs.resetToInit(),e.fs.openTouchSomeCard(),e.fs.lockBtn.removeChildren(),e.fs.chooseCard.removeChildren(),e.fs.lockText.removeChildren(),e.ms.parent.removeChild(e.cs),1==e.fs.shouldShowResultPanel)if("WIN"==e.fs.resultPanelResult){e.fs.closeTouchAllCard(),e.fs.raiseFlagBtn.touchEnabled=!1,e.fs.resultPanel.addChildAt(e.fs.resultPanel_res_w,0);var t=egret.Tween.get(e.fs.resultPanel);t.set({y:-445}),t.to({y:e.fs.container.height/2-222.5},500,egret.Ease.quadOut),t.call(function(){"ENEMY_JUMP"==e.fs.resultPanelEnemyReason?("ch"==e.lang?e.fs.resultText_d.text="(對手已逃走)":"en"==e.lang&&(e.fs.resultText_d.text="(enemy run away)"),e.fs.resultText.addChild(e.fs.resultText_d),e.fs.fightAgainBtn.touchEnabled=!1,e.fs.fightAgainBtn.contains(e.fs.fightAgainBtn_res_f)||e.fs.fightAgainBtn.addChild(e.fs.fightAgainBtn_res_f),e.fs.fightAgainBtn.contains(e.fs.fightAgainBtn_res_t)&&e.fs.fightAgainBtn.removeChild(e.fs.fightAgainBtn_res_t),e.fs.backLoginBtn.touchEnabled=!0,e.fs.joinFightBtn.touchEnabled=!0):"RAISE_FLAG"==e.fs.resultPanelEnemyReason?("ch"==e.lang?e.fs.resultText_d.text="(對手已投降)":"en"==e.lang&&(e.fs.resultText_d.text="(enemy yield)"),e.fs.resultText.addChild(e.fs.resultText_d),e.fs.fightAgainBtn.touchEnabled=!0,e.fs.backLoginBtn.touchEnabled=!0,e.fs.joinFightBtn.touchEnabled=!0):(e.fs.fightAgainBtn.touchEnabled=!0,e.fs.backLoginBtn.touchEnabled=!0,e.fs.joinFightBtn.touchEnabled=!0)},e),e.fs.container.addChild(e.fs.resultPanel)}else if("LOSE"==e.fs.resultPanelResult){e.fs.closeTouchAllCard(),e.fs.raiseFlagBtn.touchEnabled=!1,e.fs.resultPanel.addChildAt(e.fs.resultPanel_res_l,0);var t=egret.Tween.get(e.fs.resultPanel);t.set({y:-445}),t.to({y:e.fs.container.height/2-222.5},500,egret.Ease.quadOut),t.call(function(){e.fs.fightAgainBtn.touchEnabled=!0,e.fs.backLoginBtn.touchEnabled=!0,e.fs.joinFightBtn.touchEnabled=!0},e),e.fs.container.addChild(e.fs.resultPanel)}else if("DRAW"==e.fs.resultPanelResult){e.fs.closeTouchAllCard(),e.fs.raiseFlagBtn.touchEnabled=!1,e.fs.resultPanel.addChildAt(e.fs.resultPanel_res_d,0);var t=egret.Tween.get(e.fs.resultPanel);t.set({y:-445}),t.to({y:e.fs.container.height/2-222.5},500,egret.Ease.quadOut),t.call(function(){e.fs.fightAgainBtn.touchEnabled=!0,e.fs.backLoginBtn.touchEnabled=!0,e.fs.joinFightBtn.touchEnabled=!0},e),e.fs.container.addChild(e.fs.resultPanel)}},e)},e)},e),e.cs.container.addChild(e.cs.p1Card),e.cs.container.addChild(e.cs.p2Card),e.cs.p1Card.addChild(h),e.cs.p2Card.addChild(r)},this),this.ms.parent.addChild(this.cs);break;case"CARD_WIN":if(1==this.cs.cardAnimationEnd){var o=void 0;"p1"==this.fs.pOrder?(this.vt.playVoiceWin(),o=egret.Tween.get(this.cs.p1Result),o.set({y:67.5,alpah:.01}),o.to({y:117.5,alpha:1},1e3,egret.Ease.quadOut),this.cs.container.addChild(this.cs.p1Result),this.cs.p1Result.addChild(this.cs.p1Result_res_w)):"p2"==this.fs.pOrder&&(this.vt.playVoiceWin(),o=egret.Tween.get(this.cs.p2Result),o.set({y:67.5,alpah:.01}),o.to({y:117.5,alpha:1},1e3,egret.Ease.quadOut),this.cs.container.addChild(this.cs.p2Result),this.cs.p1Result.addChild(this.cs.p2Result_res_w))}else this.cs.resultCheck="WIN",this.cs.resultAnimationReady=!0;break;case"CARD_LOSE":if(1==this.cs.cardAnimationEnd){var o=void 0;"p1"==this.fs.pOrder?(this.vt.playVoiceWin(),o=egret.Tween.get(this.cs.p2Result),o.set({y:67.5,alpah:.01}),o.to({y:117.5,alpha:1},1e3,egret.Ease.quadOut),this.cs.container.addChild(this.cs.p2Result),this.cs.p2Result.addChild(this.cs.p2Result_res_w)):"p2"==this.fs.pOrder&&(this.vt.playVoiceWin(),o=egret.Tween.get(this.cs.p1Result),o.set({y:67.5,alpah:.01}),o.to({y:117.5,alpha:1},1e3,egret.Ease.quadOut),this.cs.container.addChild(this.cs.p1Result),this.cs.p1Result.addChild(this.cs.p1Result_res_w))}else this.cs.resultCheck="LOSE",this.cs.resultAnimationReady=!0;break;case"CARD_DRAW":if(1==this.cs.cardAnimationEnd){this.vt.playVoiceWin();var o=void 0;o=egret.Tween.get(this.cs.resultDraw),o.set({y:67.5,alpah:.01}),o.to({y:117.5,alpha:1},1e3,egret.Ease.quadOut),this.cs.container.addChild(this.cs.resultDraw),this.cs.resultDraw.addChild(this.cs.resultDraw_res)}else this.cs.resultCheck="DRAW",this.cs.resultAnimationReady=!0}},t}();__reflect(Poke7Ws.prototype,"Poke7Ws");var VoiceTool=function(){function t(){this.enablePlay=!0,this.voiceBg=RES.getRes("voice_bg_mp3"),this.voiceWin=RES.getRes("voice_win_mp3"),this.voiceChooseCard=RES.getRes("voice_choose_card_mp3"),this.voiceLock=RES.getRes("voice_lock_mp3")}return t.prototype.playVoiceBg=function(){1==this.enablePlay&&(this.voiceBgChannel=this.voiceBg.play(0,-1))},t.prototype.playVoiceWin=function(){1==this.enablePlay&&this.voiceWin.play(0,1)},t.prototype.playChooseCard=function(){1==this.enablePlay&&this.voiceChooseCard.play(0,1)},t.prototype.playVoiceLock=function(){1==this.enablePlay&&this.voiceLock.play(0,1)},t.prototype.stopAllVoice=function(){this.enablePlay=!1,this.voiceBgChannel.stop()},t.prototype.startAllVoice=function(){this.enablePlay=!0,this.voiceBgChannel=this.voiceBg.play(0,-1)},t}();__reflect(VoiceTool.prototype,"VoiceTool");