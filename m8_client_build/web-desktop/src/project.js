require=function t(e,o,n){function i(c,r){if(!o[c]){if(!e[c]){var a="function"==typeof require&&require;if(!r&&a)return a(c,!0);if(s)return s(c,!0);var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){var o=e[c][1][t];return i(o||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var s="function"==typeof require&&require,c=0;c<n.length;c++)i(n[c]);return i}({Alert:[function(t,e,o){"use strict";cc._RF.push(e,"136d6d4ScZBb7+BJzy9Fzvm","Alert"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onOk=null,e.showCancelButton=!0,e.onCancel=null,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.show=function(t,e,o,n){if(this.reset(),this.node.active=!0,this.node.on(cc.Node.EventType.TOUCH_START,function(t){t.stopPropagation()}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){t.stopPropagation()}),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){t.stopPropagation()}),this.node.on(cc.Node.EventType.TOUCH_END,function(t){t.stopPropagation()}),this.contentLabel.string=t,this.onOk=e,this.onCancel=n,this.showCancelButton=o,!1===this.showCancelButton){var i=this.findCancelButton(),s=this.findOkButton();i.active=!1,s.x=0}return this},e.prototype.findCancelButton=function(){return cc.find("alert/body/cancelButton")},e.prototype.findOkButton=function(){return cc.find("alert/body/okButton")},e.prototype.findContentLabel=function(){return cc.find("alert/body/contentLabel")},e.prototype.reset=function(){this.contentLabel.string=null,this.onOk=null,this.onCancel=null,this.findOkButton().x=-113,this.findCancelButton().active=!0},e.prototype.onOkButtonClick=function(){void 0!==this.onOk&&null!==this.onOk&&this.onOk(),this.close()},e.prototype.onCancelButtonClick=function(){void 0!==this.onCancel&&null!==this.onCancel&&this.onCancel(),this.close()},e.prototype.close=function(){this.node.active=!1},__decorate([s(cc.Label)],e.prototype,"contentLabel",void 0),__decorate([s(cc.Button)],e.prototype,"okButton",void 0),__decorate([s(cc.Button)],e.prototype,"cancelButton",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],AudioMgr:[function(t,e,o){"use strict";cc._RF.push(e,"dbedfho30JIW6ioHylSA0ji","AudioMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,s=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgmVolume=1,e.sfxVolume=1,e.bgmAudioID=-1,e}return __extends(e,t),e.prototype.init=function(){var t=cc.sys.localStorage.getItem("bgmVolume");null!==t&&(this.bgmVolume=parseFloat(t)),null!==cc.sys.localStorage.getItem("sfxVolume")&&(this.sfxVolume=parseFloat(t)),cc.game.on(cc.game.EVENT_HIDE,function(){console.log("cc.audioEngine.pauseAll"),cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("cc.audioEngine.resumeAll"),cc.audioEngine.resumeAll()})},e.prototype.getUrl=function(t){return cc.url.raw("resources/sounds/"+t)},e.prototype.playBGM=function(t){var e=this.getUrl(t);console.log(e),this.bgmAudioID>=0&&cc.audioEngine.stop(this.bgmAudioID),this.bgmAudioID=cc.audioEngine.play(e,!0,this.bgmVolume)},e.prototype.playSFX=function(t){var e=this.getUrl(t);if(this.sfxVolume>0)cc.audioEngine.play(e,!1,this.sfxVolume)},e.prototype.setSFXVolume=function(t){this.sfxVolume!==t&&(cc.sys.localStorage.setItem("sfxVolume",t),this.sfxVolume=t)},e.prototype.setBGMVolume=function(t,e){this.bgmAudioID>=0&&(t>0?cc.audioEngine.resume(this.bgmAudioID):cc.audioEngine.pause(this.bgmAudioID)),(this.bgmVolume!==t||e)&&(cc.sys.localStorage.setItem("bgmVolume",t),this.bgmVolume=t,cc.audioEngine.setVolume(this.bgmAudioID,t))},e.prototype.pauseAll=function(){cc.audioEngine.pauseAll()},e.prototype.resumeAll=function(){cc.audioEngine.resumeAll()},e=__decorate([i],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],Bulletin:[function(t,e,o){"use strict";cc._RF.push(e,"cddf66rHShJEZQwJ6zcjRkO","Bulletin"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isShowing=!1,e.bulletinPool=[],e}return __extends(e,t),e.prototype.onLoad=function(){this.content.node.y=-this.content.node.parent.height,this.content.node.height=this.content.node.parent.height},e.prototype.show=function(t){!1===this.isShowing?(this.isShowing=!0,this.node.active=!0,this.content.string=t.bulletin,this.playMsg(t.stayTime)):!0===this.isShowing&&this.bulletinPool.push(t)},e.prototype.playMsg=function(t){var e=this,o=cc.moveTo(2,cc.p(0,0)).easing(cc.easeOut(1)),n=cc.delayTime(t),i=cc.moveTo(1,cc.p(0,this.content.node.parent.height)).easing(cc.easeIn(1)),s=cc.callFunc(function(){e.content.node.position=cc.p(0,-e.content.node.parent.height),e.isShowing=!1,e.bulletinPool.length>0?e.show(e.bulletinPool.shift()):e.node.active=!1});this.content.node.runAction(cc.sequence(o,n,i,s))},__decorate([s(cc.Label)],e.prototype,"content",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],CowcowBetScoreLogic:[function(t,e,o){"use strict";cc._RF.push(e,"9686dhd2XRG463iWwy25x8p","CowcowBetScoreLogic"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./CowcowEventConst"),i=cc._decorator,s=i.ccclass,c=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.def=null,e.ten=null,e.twentyFive=null,e.fifty=null,e.betScore=null,e.limitScore=null,e.defaultScore=null,e.userBetScore=null,e.tenValue=null,e.twentyFiveValue=null,e.fiftyValue=null,e}return __extends(e,t),e.prototype.setLimitAndDefault=function(t,e){this.limitScore=t,this.defaultScore=e,this.userBetScore=e,this.tenValue=Math.round(.1*t),this.twentyFiveValue=Math.round(.25*t),this.fiftyValue=Math.round(.5*t),this.node.getChildByName("limit_score").getComponent(cc.Label).string=t+"",this.node.getChildByName("default_score").getComponent(cc.Label).string=e+"",this.def.getChildByName("content").getComponent(cc.Label).string=e+"",this.ten.getChildByName("content").getComponent(cc.Label).string=this.tenValue+"",this.twentyFive.getChildByName("content").getComponent(cc.Label).string=this.twentyFiveValue+"",this.fifty.getChildByName("content").getComponent(cc.Label).string=this.fiftyValue+"",this.updateStatus()},e.prototype.onDefaultButtonClick=function(){this.userBetScore=this.userBetScore+this.defaultScore,this.updateStatus()},e.prototype.onTenPerButtonClick=function(){this.userBetScore=this.userBetScore+this.tenValue,this.updateStatus()},e.prototype.onTwentyFivePerButtonClick=function(){this.userBetScore=this.userBetScore+this.twentyFiveValue,this.updateStatus()},e.prototype.onFiftyPerButtonClick=function(){this.userBetScore=this.userBetScore+this.fiftyValue,this.updateStatus()},e.prototype.onMaxButtonClick=function(){this.userBetScore=this.limitScore,this.updateStatus()},e.prototype.onCancelButtonClick=function(){this.userBetScore=this.defaultScore,this.updateStatus()},e.prototype.onSubmitButtonClick=function(){this.node.parent.getComponent("CowcowLogic").cancelTimer(),this.allowAllButtonsClick(!1);var t=new cc.gg.packet;t.mainCMD=n.default.COWCOW,t.subCMD=n.default.SUB_C_ADD_SCORE,t.messages={betScore:this.userBetScore},cc.gg.net.send(t.toJsonString())},e.prototype.updateStatus=function(){this.betScore.string=this.userBetScore.toFixed(2)+"",this.userBetScore+this.defaultScore>this.limitScore?this.def.getChildByName("button").getComponent(cc.Button).interactable=!1:this.def.getChildByName("button").getComponent(cc.Button).interactable=!0,this.userBetScore+this.tenValue>this.limitScore?this.ten.getChildByName("button").getComponent(cc.Button).interactable=!1:this.ten.getChildByName("button").getComponent(cc.Button).interactable=!0,this.userBetScore+this.twentyFiveValue>this.limitScore?this.twentyFive.getChildByName("button").getComponent(cc.Button).interactable=!1:this.twentyFive.getChildByName("button").getComponent(cc.Button).interactable=!0,this.userBetScore+this.fiftyValue>this.limitScore?this.fifty.getChildByName("button").getComponent(cc.Button).interactable=!1:this.fifty.getChildByName("button").getComponent(cc.Button).interactable=!0},e.prototype.allowAllButtonsClick=function(t){this.def.getChildByName("button").getComponent(cc.Button).interactable=t,this.ten.getChildByName("button").getComponent(cc.Button).interactable=t,this.twentyFive.getChildByName("button").getComponent(cc.Button).interactable=t,this.fifty.getChildByName("button").getComponent(cc.Button).interactable=t,this.node.getChildByName("max_button").getComponent(cc.Button).interactable=t,this.node.getChildByName("cancel_button").getComponent(cc.Button).interactable=t,this.node.getChildByName("submit_button").getChildByName("button").getComponent(cc.Button).interactable=t},__decorate([c(cc.Node)],e.prototype,"def",void 0),__decorate([c(cc.Node)],e.prototype,"ten",void 0),__decorate([c(cc.Node)],e.prototype,"twentyFive",void 0),__decorate([c(cc.Node)],e.prototype,"fifty",void 0),__decorate([c(cc.Label)],e.prototype,"betScore",void 0),e=__decorate([s],e)}(cc.Component);o.default=r,cc._RF.pop()},{"./CowcowEventConst":"CowcowEventConst"}],CowcowCardsLogic:[function(t,e,o){"use strict";cc._RF.push(e,"7eeaaBQVAxHO7BatyRsvEiU","CowcowCardsLogic"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./CowcowLogic"),i=cc._decorator,s=i.ccclass,c=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardNodes=null,e.cardsNumber=null,e.resultSpriteFrame=null,e.order=null,e.value=null,e.hasCowPosition=[{x:-20,y:75},{x:20,y:75},{x:-40,y:0},{x:0,y:0},{x:40,y:0}],e.noCowPosition=[{x:-80,y:0},{x:-40,y:0},{x:0,y:0},{x:40,y:0},{x:80,y:0}],e}return __extends(e,t),e.prototype.onLoad=function(){this.cardNodes=[this.c1,this.c2,this.c3,this.c4,this.c5]},e.prototype.setCardsNumberAndOrderAndPositionAndScale=function(t,e,o,n,i,s,c){void 0===t&&(t=null),void 0===i&&(i=0),void 0===s&&(s=!1),void 0===c&&(c=!1),!1===s&&0!==i&&this.setScaleByPlayers(i),null!==t&&(this.cardsNumber=t),null!==e&&(this.order=e),null!==o&&null!==n&&this.setNodePosition(o,n),!0===c&&this.display()},e.prototype.showNextCard=function(t){void 0===t&&(t=!1);for(var e=0;e<this.cardNodes.length;e++){var o=this.cardNodes[e].getComponent(cc.Sprite);if(null===o.spriteFrame){if(!0===t){if(null===this.cardsNumber)return void console.error("你必須先設定撲克牌");o.spriteFrame=n.default.getCardSpriteFrameByNumbers([this.cardsNumber[e]])[0]}else!1===t&&(o.spriteFrame=n.default.getCardSpriteFrameByNumbers([0])[0]);break}}},e.prototype.showDisplayIcon=function(t){this.display_icon.active=t},e.prototype.display=function(){null!==this.cardsNumber?this.calculateResultAndSetView():console.error("沒牌怎麼攤牌?")},e.prototype.calculateResultAndSetView=function(){if(null!==this.cardsNumber){for(var t=0,e=[[0,1,2],[0,1,3],[0,1,4],[0,2,3],[0,2,4],[0,3,4],[1,2,3],[1,2,4],[1,3,4],[2,3,4]],o=this,n=0;n<e.length&&"break"!==function(n){for(var i=0,s=0;s<e[n].length;s++)i+=o.getCardValue(o.cardsNumber[e[n][s]]);if(i%10==0){var c=[0,1,2,3,4].filter(function(t){return e[n].indexOf(t)<0});o.setCardNodePosition(!0,c,e[n]);for(var r=0;r<c.length;r++)t+=o.getCardValue(o.cardsNumber[c[r]]);if(0==(t%=10)){t=11;for(var a=0;a<o.cardsNumber.length;a++)if(o.cardsNumber[a]<=10){t=10;break}}return o.setResultSpriteFrame(t,!1),"break"}n===e.length-1&&(o.setCardNodePosition(!1),o.setResultSpriteFrame(0,!1))}(n);n++);this.updateCardsSpriteFrame(),this.value=t,console.log("最終點數: "+t)}else console.error("沒牌怎麼算點?")},e.prototype.setResultSpriteFrame=function(t,e){void 0===t&&(t=null),void 0===e&&(e=!1),null===t&&(t=this.value),this.result.getComponent(cc.Sprite).spriteFrame=n.default.getResultSpriteFrameByValue(t,e)},e.prototype.setResultScoreLabel=function(t){t>=0?(this.result_score.color=cc.Color.YELLOW,this.result_score.getComponent(cc.Label).string="+"+t):(this.result_score.color=cc.Color.GRAY,this.result_score.getComponent(cc.Label).string=t+"")},e.prototype.setNodePosition=function(t,e){this.node.x=t,this.node.y=e},e.prototype.getNodePosition=function(){return{x:this.node.x,y:this.node.y}},e.prototype.setCardNodePosition=function(t,e,o){void 0===e&&(e=null),void 0===o&&(o=null);var n;if(!0===t){n=this.hasCowPosition.slice(0,this.hasCowPosition.length);for(var i=e.concat(o),s=0;s<i.length;s++){r=n.shift();this.cardNodes[i[s]].x=r.x,this.cardNodes[i[s]].y=r.y,this.cardNodes[i[s]].setSiblingIndex(s)}}else if(!1===t){n=this.noCowPosition.slice(0,this.noCowPosition.length);for(var c=0;c<this.cardNodes.length;c++){var r=n.shift();this.cardNodes[c].x=r.x,this.cardNodes[c].y=r.y,this.cardNodes[c].setSiblingIndex(c)}}},e.prototype.updateCardsSpriteFrame=function(){for(var t=n.default.getCardSpriteFrameByNumbers(this.cardsNumber),e=0;e<this.cardNodes.length;e++)this.cardNodes[e].getComponent(cc.Sprite).spriteFrame=t.shift()},e.prototype.setScaleByPlayers=function(t){switch(t){case 2:this.node.scaleX=this.node.scaleY=1;break;case 3:case 4:this.node.scaleX=this.node.scaleY=.85;break;case 5:case 6:this.node.scaleX=this.node.scaleY=.75;break;case 7:case 8:this.node.scaleX=this.node.scaleY=.65;break;default:console.error("人數設定錯誤!!!")}},e.prototype.getCardValue=function(t){var e=t%13;return 11!==e&&12!==e&&0!==e||(e=0),e},__decorate([c(cc.Node)],e.prototype,"c1",void 0),__decorate([c(cc.Node)],e.prototype,"c2",void 0),__decorate([c(cc.Node)],e.prototype,"c3",void 0),__decorate([c(cc.Node)],e.prototype,"c4",void 0),__decorate([c(cc.Node)],e.prototype,"c5",void 0),__decorate([c(cc.Node)],e.prototype,"result",void 0),__decorate([c(cc.Node)],e.prototype,"display_icon",void 0),__decorate([c(cc.Node)],e.prototype,"result_score",void 0),e=__decorate([s],e)}(cc.Component);o.default=r,cc._RF.pop()},{"./CowcowLogic":"CowcowLogic"}],CowcowEnemyLogic:[function(t,e,o){"use strict";cc._RF.push(e,"8ef75gwjvVOvrNjJ9pXIJeG","CowcowEnemyLogic"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,s=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.order=null,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.setOrderAndPosition=function(t,e,o){this.order=t,this.node.x=e,this.node.y=o},e.prototype.showBank=function(t){void 0===t&&(t=!0),this.node.getChildByName("bank").active=t},e.prototype.showCallBankIcon=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);var o=this.node.getChildByName("call_bank_icon"),n=this.node.getChildByName("no_call_bank_icon");!0===t?!0===e?(o.active=!0,n.active=!1):!1===e&&(o.active=!1,n.active=!0):!1===t&&(o.active=!1,n.active=!1)},e.prototype.showBetScoreInfoAndSetBetScore=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=0);var o=this.node.getChildByName("bet_score_info");!0===t?(o.active=!0,o.getChildByName("content").getComponent(cc.Label).string=e+""):!1===t&&(o.active=!1,o.getChildByName("content").getComponent(cc.Label).string="")},e.prototype.getBankPositionOfWorld=function(){return{x:this.node.x+this.node.getChildByName("bank").x,y:this.node.y+this.node.getChildByName("bank").y}},e.prototype.updateOrder=function(){this.node.getChildByName("order").getComponent(cc.Label).string=this.order+""},e=__decorate([i],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],CowcowEventConst:[function(t,e,o){"use strict";cc._RF.push(e,"c2303ZbDABDrIA/eeXGzuYs","CowcowEventConst"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,s=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.COWCOW=3,e.SUB_S_GAME_START=100,e.SUB_S_ADD_SCORE=101,e.SUB_S_PLAYER_EXIT=102,e.SUB_S_SEND_CARD=103,e.SUB_S_GAME_END=104,e.SUB_S_OPEN_CARD=105,e.SUB_S_NOTIFY_BANKER=106,e.SUB_S_ENEMY_CALL_BANKER=107,e.SUB_S_ENEMY_BET_SCORE=108,e.SUB_S_CALL_BANKER=109,e.SUB_S_ENEMY_OPEN_CARD=110,e.SUB_S_EXIT=111,e.SUB_S_KICK=112,e.SUB_C_CALL_BANKER=1,e.SUB_C_ADD_SCORE=2,e.SUB_C_OPEN_CARD=3,e.SUB_C_GAME_START=4,e.SUB_C_EXIT=6,e.MORE_USER_CALL_BANKER=2,e.NO_USER_CALL_BANKER=0,e.SINGLE_USER_CALL_BANKER=1,e.WAIT_ENEMY_CALL_BANK=0,e.WAIT_ENEMY_BET_SCORE=1,e.PLEASE_BET_SCORE=2,e.WAIT_ENEMY_OPEN_CARD=3,e.HIDE_GAME_MSG=4,e=__decorate([i],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],CowcowLogic:[function(t,e,o){"use strict";cc._RF.push(e,"3f48fomqAxBlpR7cB7qthaE","CowcowLogic"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./CowcowEventConst"),i=cc._decorator,s=i.ccclass,c=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enemyInfo=null,e.cards=null,e.room_info=null,e.room_msg_info=null,e.game_msg_info=null,e.user_info=null,e.call_bank_buttons=null,e.timer=null,e.bank=null,e.call_bank_info=null,e.bet_score_buttons=null,e.card_back=null,e.display_buttons=null,e.start_button=null,e.room_buttons=null,e.enemiesInfo=[],e.cardsInfo=[],e.isGaming=!1,e.userOrder=null,e.players=null,e.bankOrder=null,e.isCardlistResLoaded=!1,e.isResultResLoaded=!1,e.sendCardAnimationTimes=null,e.sendCardAnimationIndex=1,e.updateTimeLabel=null,e.isHinted=!1,e}return __extends(e,t),o=e,e.prototype.onLoad=function(){this.initLoadRes(),this.initEventHandlers(),this.initNodeReference()},e.prototype.initLoadRes=function(){var t=this;cc.loader.loadRes("images/cardlist",cc.SpriteAtlas,function(e,i){if(o.cardSpriteFrames=i.getSpriteFrames(),console.log(o.cardSpriteFrames),t.isCardlistResLoaded=!0,t.isCardlistResLoaded&&t.isResultResLoaded){var s=new cc.gg.packet;s.mainCMD=n.default.COWCOW,s.subCMD=n.default.SUB_C_GAME_START,cc.gg.net.send(s.toJsonString())}}),cc.loader.loadRes("images/cowcow/result",cc.SpriteAtlas,function(e,i){if(o.resultSpriteFrames=i.getSpriteFrames(),console.log(o.resultSpriteFrames),t.isResultResLoaded=!0,t.isCardlistResLoaded&&t.isResultResLoaded){var s=new cc.gg.packet;s.mainCMD=n.default.COWCOW,s.subCMD=n.default.SUB_C_GAME_START,cc.gg.net.send(s.toJsonString())}})},e.prototype.initEventHandlers=function(){var t=this;cc.gg.net.currentHandler=function(e){switch(e.mainCMD){case n.default.COWCOW:switch(e.subCMD){case n.default.SUB_S_GAME_START:t.onGameStartEvent(e.getMessages());break;case n.default.SUB_S_CALL_BANKER:t.onUserCallBankEvent(e.getMessages());break;case n.default.SUB_S_ADD_SCORE:t.onUserBetScoreEvent(e.getMessages());break;case n.default.SUB_S_ENEMY_CALL_BANKER:t.onEnemyCallBankEvent(e.getMessages());break;case n.default.SUB_S_ENEMY_BET_SCORE:t.onEnemyBetScoreEvent(e.getMessages());break;case n.default.SUB_S_NOTIFY_BANKER:t.onBankEvent(e.getMessages());break;case n.default.SUB_S_SEND_CARD:t.onSendCardEvent(e.getMessages());break;case n.default.SUB_S_OPEN_CARD:t.onUserOpenCardEvent();break;case n.default.SUB_S_ENEMY_OPEN_CARD:t.onEnemyOpenCardEvent(e.getMessages());break;case n.default.SUB_S_GAME_END:t.onGameEndEvent(e.getMessages());break;case n.default.SUB_S_EXIT:t.onExitEvent();break;case n.default.SUB_S_KICK:t.onKickEvent(e.getMessages())}}}},e.prototype.initNodeReference=function(){this.room_info=this.node.getChildByName("room_info"),this.room_msg_info=this.node.getChildByName("room_msg_info"),this.game_msg_info=this.node.getChildByName("game_msg_info"),this.user_info=this.node.getChildByName("user_info"),this.call_bank_buttons=this.node.getChildByName("call_bank_buttons"),this.timer=this.node.getChildByName("timer"),this.bank=this.node.getChildByName("bank"),this.call_bank_info=this.node.getChildByName("call_bank_info"),this.bet_score_buttons=this.node.getChildByName("bet_score_buttons"),this.card_back=this.node.getChildByName("card_back"),this.display_buttons=this.node.getChildByName("display_buttons"),this.start_button=this.node.getChildByName("start_button"),this.room_buttons=this.node.getChildByName("room_buttons")},e.prototype.onGameStartEvent=function(t){var e=this;this.isGaming=!0,this.userOrder=t.userOrder,this.players=t.players,this.bet_score_buttons.getComponent("CowcowBetScoreLogic").setLimitAndDefault(t.limitScore,t.score),this.setGameNoLabel(t.gameNo),this.setGameScore(t.score),this.setUserNameAndScore(t.userScore),this.setEnemyInfo(t.players,t.userOrder),this.showRoomMsgInfo(!1),this.showUserInfo(!0),this.showCallBankButtons(!0),this.showBank(!0),this.setTimerTime(t.time,function(){e.autoNoCallBank()}),this.showTimer(!0)},e.prototype.onUserCallBankEvent=function(t){this.showTimer(!1);var e=1===t.callBank;this.showUserCallBankIcon(!0,e),this.showCallBankButtons(!1)},e.prototype.onUserBetScoreEvent=function(t){this.showTimer(!1),this.showUserBetScoreAndSetBetScore(!0,t.betScore),this.showBetScoreButtons(!1),this.showGameMsgInfo(n.default.WAIT_ENEMY_BET_SCORE)},e.prototype.onBankEvent=function(t){var e=this;switch(this.bankOrder=t.bankOrder,this.setTimerTime(t.time,function(){e.autoBetScore()}),t.callBankNumber){case n.default.NO_USER_CALL_BANKER:this.showCallBankInfo(!0,!1),this.playBankInfoAndBankAnimation(!1,t.bankOrder);break;case n.default.SINGLE_USER_CALL_BANKER:this.showCallBankInfo(!1),this.playBankAnimation(t.bankOrder);break;case n.default.MORE_USER_CALL_BANKER:this.showCallBankInfo(!0,!0),this.playBankInfoAndBankAnimation(!0,t.bankOrder)}},e.prototype.onEnemyCallBankEvent=function(t){var e=this.getEnemyInfo(t.order),o=1===t.callBank;e.getComponent("CowcowEnemyLogic").showCallBankIcon(!0,o)},e.prototype.onEnemyBetScoreEvent=function(t){this.getEnemyInfo(t.order).getComponent("CowcowEnemyLogic").showBetScoreInfoAndSetBetScore(!0,t.betScore)},e.prototype.onSendCardEvent=function(t){var e=this;this.setTimerTime(t.time,function(){e.autoDisplayCards()}),this.showGameMsgInfo(n.default.HIDE_GAME_MSG),this.setCardsInfo(this.players,this.userOrder,t.userCards),this.sendCardAnimationTimes=5*this.players,this.playSendCardAnimation()},e.prototype.onUserOpenCardEvent=function(){this.showDisplayButtons(!1),this.showGameMsgInfo(n.default.WAIT_ENEMY_OPEN_CARD)},e.prototype.onEnemyOpenCardEvent=function(t){this.getCardsInfo(t.order).getComponent("CowcowCardsLogic").showDisplayIcon(!0)},e.prototype.onGameEndEvent=function(t){this.isGaming=!1,this.showGameMsgInfo(n.default.HIDE_GAME_MSG);for(var e=t.result,o=0;o<e.length;o++){var i=e[o].order,s=e[o].cards,c=e[o].changeScore,r=this.getCardsInfo(i).getComponent("CowcowCardsLogic");i!==this.userOrder?(r.showDisplayIcon(!1),r.setCardsNumberAndOrderAndPositionAndScale(s,null,null,null,0,!1,!0)):r.setCardsNumberAndOrderAndPositionAndScale(s,null,null,null,0,!0,!0),r.setResultSpriteFrame(null,!0),r.setResultScoreLabel(c)}this.showStartButton(!0)},e.prototype.onExitEvent=function(){cc.director.loadScene("PlazaScene")},e.prototype.onKickEvent=function(t){cc.gg.alert.show(t.reason,function(){cc.director.loadScene("PlazaScene")},!1)},e.prototype.showRoomMsgInfo=function(t){this.room_msg_info.active=t},e.prototype.showCallBankButtons=function(t){void 0===t&&(t=!0),this.call_bank_buttons.active=t},e.prototype.showBetScoreButtons=function(t){void 0===t&&(t=!0),this.bet_score_buttons.active=t},e.prototype.showGameMsgInfo=function(t){var e=this.game_msg_info.getChildByName("wait_enemy_call_bank"),o=this.game_msg_info.getChildByName("wait_enemy_bet_score"),i=this.game_msg_info.getChildByName("please_bet_score"),s=this.game_msg_info.getChildByName("wait_enemy_display");switch(this.game_msg_info.active=!1,e.active=!1,o.active=!1,i.active=!1,s.active=!1,t){case n.default.WAIT_ENEMY_CALL_BANK:this.game_msg_info.active=!0,e.active=!0;break;case n.default.WAIT_ENEMY_BET_SCORE:this.game_msg_info.active=!0,o.active=!0;break;case n.default.PLEASE_BET_SCORE:this.game_msg_info.active=!0,i.active=!0;break;case n.default.WAIT_ENEMY_OPEN_CARD:this.game_msg_info.active=!0,s.active=!0;break;case n.default.HIDE_GAME_MSG:this.game_msg_info.active=!1,e.active=!1,o.active=!1,i.active=!1,s.active=!1}},e.prototype.showBank=function(t){void 0===t&&(t=!0),this.bank.active=t,!1===t&&(this.bank.x=0,this.bank.y=74)},e.prototype.showUserInfo=function(t){this.user_info.active=t},e.prototype.showUserInfoBank=function(t){void 0===t&&(t=!0),this.user_info.getChildByName("bank").active=t},e.prototype.showUserCallBankIcon=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);var o=this.user_info.getChildByName("call_bank_icon"),n=this.user_info.getChildByName("no_call_bank_icon");!0===t?!0===e?(o.active=!0,n.active=!1):!1===e&&(o.active=!1,n.active=!0):!1===t&&(o.active=!1,n.active=!1)},e.prototype.showUserBetScoreAndSetBetScore=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=0);var o=this.user_info.getChildByName("bet_score_info");!0===t?(o.active=!0,o.getChildByName("content").getComponent(cc.Label).string=e+""):!1===t&&(o.active=!1,o.getChildByName("content").getComponent(cc.Label).string="")},e.prototype.showCallBankInfo=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),!0===t?(this.call_bank_info.active=!0,!0===e?this.call_bank_info.getChildByName("more_user_call").active=!0:!1===e&&(this.call_bank_info.getChildByName("no_user_call").active=!0)):!1===t&&(this.call_bank_info.active=!1,this.call_bank_info.getChildByName("more_user_call").active=!1,this.call_bank_info.getChildByName("no_user_call").active=!1)},e.prototype.showDisplayButtons=function(t){this.display_buttons.active=t},e.prototype.showStartButton=function(t){this.start_button.active=t},e.prototype.playBankInfoAndBankAnimation=function(t,e){var o=this;void 0===t&&(t=!0);var n=cc.callFunc(function(){o.playBankAnimation(e)}),i=cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5),cc.fadeOut(.5),cc.fadeIn(.5),n);!0===t?this.call_bank_info.getChildByName("more_user_call").runAction(i):!1===t&&this.call_bank_info.getChildByName("no_user_call").runAction(i)},e.prototype.playBankAnimation=function(t){var e=this,o=null,i=null;if(this.userOrder===t)o={x:372,y:-244},i=cc.callFunc(function(){e.showUserInfoBank(!0),e.showBank(!1),e.showCallBankInfo(!1),e.hideAllPlayersCallBankIcon(),e.showGameMsgInfo(n.default.WAIT_ENEMY_BET_SCORE)});else{var s=this.getEnemyInfo(t);o=s.getComponent("CowcowEnemyLogic").getBankPositionOfWorld(),i=cc.callFunc(function(){s.getComponent("CowcowEnemyLogic").showBank(!0),e.showBank(!1),e.showCallBankInfo(!1),e.hideAllPlayersCallBankIcon(),e.showGameMsgInfo(n.default.PLEASE_BET_SCORE),e.showBetScoreButtons(!0),e.showTimer(!0)})}var c=cc.sequence(cc.moveTo(1,cc.p(o.x,o.y)).easing(cc.easeOut(1)),i);this.bank.runAction(c)},e.prototype.playSendCardAnimation=function(){var t=this;this.card_back.active=!0,this.card_back.x=this.card_back.y=0;var e,o,n=cc.rotateBy(.1,180);if(this.sendCardAnimationIndex<=this.sendCardAnimationTimes){var i=this.sendCardAnimationIndex%this.players;0===i&&(i=this.players);var s=this.getCardsInfo(i).getComponent("CowcowCardsLogic").getNodePosition();e=cc.moveTo(.1,cc.p(s.x,s.y)),o=cc.callFunc(function(e,o){o===t.userOrder?t.getCardsInfo(o).getComponent("CowcowCardsLogic").showNextCard(!0):t.getCardsInfo(o).getComponent("CowcowCardsLogic").showNextCard(!1),t.sendCardAnimationIndex++,t.playSendCardAnimation()},this,i),this.card_back.runAction(cc.sequence(cc.spawn(n,e),o))}else this.card_back.active=!1,console.log("發牌動畫結束..."),this.showDisplayButtons(!0),this.showTimer(!0)},e.prototype.setGameNoLabel=function(t){void 0===t&&(t=null);var e=this.room_info.getChildByName("number").getChildByName("content").getComponent(cc.Label);e.string=null!==t?"牌局: "+t:""},e.prototype.setGameScore=function(t){void 0===t&&(t=null);var e=this.room_info.getChildByName("score").getChildByName("content").getComponent(cc.Label);e.string=null!==t?t+"":""},e.prototype.setUserNameAndScore=function(t){void 0===t&&(t=null);var e=this.user_info.getChildByName("user_data").getChildByName("name").getComponent(cc.Label),o=this.user_info.getChildByName("user_data").getChildByName("score").getComponent(cc.Label);null!==t?(e.string=cc.gg.userHelper.getUsername(),o.string=t+""):e.string=o.string=""},e.prototype.setEnemyInfo=function(t,e){for(var n=o.getIconPosInfo(t,e),i=0;i<t;i++){var s=i+1;if(s!==e){var c=cc.instantiate(this.enemyInfo);this.node.addChild(c),c.getComponent("CowcowEnemyLogic").setOrderAndPosition(s,n[i].x,n[i].y),c.getComponent("CowcowEnemyLogic").updateOrder(),this.enemiesInfo.push(c)}}},e.prototype.getEnemyInfo=function(t){for(var e=0;e<this.enemiesInfo.length;e++)if(this.enemiesInfo[e].getComponent("CowcowEnemyLogic").order===t)return this.enemiesInfo[e];return null},e.prototype.setCardsInfo=function(t,e,n){for(var i=o.getCardsPosInfo(t,e),s=0;s<t;s++){var c=s+1,r=cc.instantiate(this.cards);this.node.addChild(r),c===e?r.getComponent("CowcowCardsLogic").setCardsNumberAndOrderAndPositionAndScale(n,c,i[s].x,i[s].y,t,!0,!1):r.getComponent("CowcowCardsLogic").setCardsNumberAndOrderAndPositionAndScale(null,c,i[s].x,i[s].y,t,!1,!1),this.cardsInfo.push(r)}},e.prototype.getCardsInfo=function(t){for(var e=0;e<this.cardsInfo.length;e++)if(this.cardsInfo[e].getComponent("CowcowCardsLogic").order===t)return this.cardsInfo[e];return null},e.getCardSpriteFrameByNumbers=function(t){var e=[];t:for(var n=0;n<t.length;n++)for(var i=0;i<o.cardSpriteFrames.length;i++)if(o.cardSpriteFrames[i].name===t[n]+""){e.push(o.cardSpriteFrames[i]);continue t}return e},e.getResultSpriteFrameByValue=function(t,e){void 0===e&&(e=!1);var n=null,i="cow_";!0===e&&(i+="end_"),i+=t;for(var s=0;s<o.resultSpriteFrames.length;s++)if(i===o.resultSpriteFrames[s].name){n=o.resultSpriteFrames[s];break}return n},e.getIconPosInfo=function(t,e){var o=[];switch(o.push({x:"fillingDataForAddOneLength",y:"fillingDataForAddOneLength"}),t){case 2:o.push({x:-560,y:22});break;case 3:o.push({x:560,y:22}),o.push({x:-560,y:22});break;case 4:o.push({x:560,y:145}),o.push({x:-428,y:203}),o.push({x:-560,y:-69});break;case 5:o.push({x:560,y:-69}),o.push({x:428,y:203}),o.push({x:-428,y:203}),o.push({x:-560,y:-69});break;case 6:o.push({x:560,y:-69}),o.push({x:428,y:203}),o.push({x:-341,y:226}),o.push({x:-531,y:-3}),o.push({x:-475,y:-233});break;case 7:o.push({x:511,y:-152}),o.push({x:562,y:55}),o.push({x:286,y:226}),o.push({x:-341,y:226}),o.push({x:-531,y:-3}),o.push({x:-475,y:-233});break;case 8:o.push({x:511,y:-152}),o.push({x:562,y:35}),o.push({x:407,y:247}),o.push({x:-226,y:247}),o.push({x:-527,y:130}),o.push({x:-531,y:-63}),o.push({x:-475,y:-258})}return o.concat(o.splice(0,t-e+1))},e.getCardsPosInfo=function(t,e){var o=[];switch(o.push({x:0,y:-266}),t){case 2:o.push({x:-370,y:22});break;case 3:o.push({x:370,y:22}),o.push({x:-370,y:22});break;case 4:o.push({x:370,y:144}),o.push({x:-228,y:202}),o.push({x:-370,y:-73});break;case 5:o.push({x:370,y:-73}),o.push({x:228,y:202}),o.push({x:-228,y:202}),o.push({x:-370,y:-73});break;case 6:o.push({x:370,y:-73}),o.push({x:228,y:202}),o.push({x:-163,y:228}),o.push({x:-356,y:-10}),o.push({x:-294,y:-238});break;case 7:o.push({x:347,y:-156}),o.push({x:399,y:48}),o.push({x:125,y:228}),o.push({x:-182,y:228}),o.push({x:-372,y:-10}),o.push({x:-313,y:-238});break;case 8:o.push({x:347,y:-156}),o.push({x:399,y:33}),o.push({x:244,y:236}),o.push({x:-69,y:236}),o.push({x:-368,y:120}),o.push({x:-372,y:-78}),o.push({x:-313,y:-277})}return o.concat(o.splice(0,t-e+1))},e.prototype.hideAllPlayersCallBankIcon=function(){this.showUserCallBankIcon(!1);for(var t=0;t<this.enemiesInfo.length;t++)this.enemiesInfo[t].getComponent("CowcowEnemyLogic").showCallBankIcon(!1)},e.prototype.onCallBankButtonClick=function(){this.cancelTimer(),this.allowCallBankButtonsClick(!1);var t=new cc.gg.packet;t.mainCMD=n.default.COWCOW,t.subCMD=n.default.SUB_C_CALL_BANKER,t.messages={callBank:1},cc.gg.net.send(t.toJsonString())},e.prototype.onNoCallBankButtonClick=function(){this.cancelTimer(),this.allowCallBankButtonsClick(!1);var t=new cc.gg.packet;t.mainCMD=n.default.COWCOW,t.subCMD=n.default.SUB_C_CALL_BANKER,t.messages={callBank:0},cc.gg.net.send(t.toJsonString())},e.prototype.onHintButtonClick=function(){this.display_buttons.getChildByName("hint_button").getComponent(cc.Button).interactable=!1,this.getCardsInfo(this.userOrder).getComponent("CowcowCardsLogic").display(),this.isHinted=!0},e.prototype.onDisplayButtonClick=function(){this.cancelTimer(),this.showTimer(!1),this.display_buttons.getChildByName("display_button").getComponent(cc.Button).interactable=!1,!1===this.isHinted&&this.onHintButtonClick();var t=new cc.gg.packet;t.mainCMD=n.default.COWCOW,t.subCMD=n.default.SUB_S_OPEN_CARD,cc.gg.net.send(t.toJsonString())},e.prototype.onStartButtonClick=function(){this.showStartButton(!1),this.revertToInit();var t=new cc.gg.packet;t.mainCMD=n.default.COWCOW,t.subCMD=n.default.SUB_C_GAME_START,cc.gg.net.send(t.toJsonString())},e.prototype.onMusicOnButtonClick=function(){this.room_buttons.getChildByName("music_on_button").active=!1,this.room_buttons.getChildByName("music_off_button").active=!0,cc.gg.audioMgr.pauseAll()},e.prototype.onMusicOffButtonClick=function(){this.room_buttons.getChildByName("music_off_button").active=!1,this.room_buttons.getChildByName("music_on_button").active=!0,cc.gg.audioMgr.resumeAll()},e.prototype.onExitButtonClick=function(){var t="";!0===this.isGaming?t="游戏进行中,强行退出将视为逃跑并扣除部分金币,是否继续?":!1===this.isGaming&&(t="确定要回到游戏大厅吗?"),cc.gg.alert.show(t,function(){var t=new cc.gg.packet;t.mainCMD=n.default.COWCOW,t.subCMD=n.default.SUB_C_EXIT,cc.gg.net.send(t.toJsonString())})},e.prototype.allowCallBankButtonsClick=function(t){this.call_bank_buttons.getChildByName("call_bank_button").getComponent(cc.Button).interactable=t,this.call_bank_buttons.getChildByName("no_call_bank_button").getComponent(cc.Button).interactable=t},e.prototype.allowDisplayButtonsClick=function(t){this.display_buttons.getChildByName("hint_button").getComponent(cc.Button).interactable=t,this.display_buttons.getChildByName("display_button").getComponent(cc.Button).interactable=t},e.prototype.revertToInit=function(){this.userOrder=null,this.players=null,this.bankOrder=null,this.isHinted=!1,this.sendCardAnimationTimes=null,this.sendCardAnimationIndex=1;for(var t=0;t<this.enemiesInfo.length;t++)this.enemiesInfo[t].destroy();this.enemiesInfo.length=0;for(var e=0;e<this.cardsInfo.length;e++)this.cardsInfo[e].destroy();this.cardsInfo.length=0,this.setGameNoLabel(null),this.setGameScore(null),this.setUserNameAndScore(null),this.showUserBetScoreAndSetBetScore(!1),this.showUserInfoBank(!1),this.showUserInfo(!1),this.allowCallBankButtonsClick(!0),this.bet_score_buttons.getComponent("CowcowBetScoreLogic").allowAllButtonsClick(!0),this.allowDisplayButtonsClick(!0),this.showRoomMsgInfo(!0),this.showTimer(!1),this.cancelTimer()},e.prototype.autoNoCallBank=function(){var t=this.call_bank_buttons.active,e=this.call_bank_buttons.getChildByName("no_call_bank_button").getComponent(cc.Button).interactable;!0===t&&!0===e&&this.onNoCallBankButtonClick()},e.prototype.autoBetScore=function(){var t=this.bet_score_buttons.active,e=this.bet_score_buttons.getChildByName("submit_button").getChildByName("button").getComponent(cc.Button).interactable;if(!0===t&&!0===e){var o=this.bet_score_buttons.getComponent("CowcowBetScoreLogic");o.onCancelButtonClick(),o.onSubmitButtonClick()}},e.prototype.autoDisplayCards=function(){var t=this.display_buttons.active,e=this.display_buttons.getChildByName("display_button").getComponent(cc.Button).interactable;!0===t&&!0===e&&this.onDisplayButtonClick()},e.prototype.showTimer=function(t){this.timer.active=t},e.prototype.setTimerTime=function(t,e){var o=this,n=t;this.timer.getChildByName("content").getComponent(cc.Label).string=n+"",this.updateTimeLabel=function(){n>=0&&(o.timer.getChildByName("content").getComponent(cc.Label).string=n+""),0===n&&(o.unschedule(o.updateTimeLabel),o.updateTimeLabel=null,e()),n--},this.schedule(this.updateTimeLabel,1,cc.macro.REPEAT_FOREVER,0)},e.prototype.cancelTimer=function(){null!==this.updateTimeLabel&&(this.unschedule(this.updateTimeLabel),this.updateTimeLabel=null)},e.cardSpriteFrames=null,e.resultSpriteFrames=null,__decorate([c(cc.Prefab)],e.prototype,"enemyInfo",void 0),__decorate([c(cc.Prefab)],e.prototype,"cards",void 0),e=o=__decorate([s],e);var o}(cc.Component);o.default=r,cc._RF.pop()},{"./CowcowEventConst":"CowcowEventConst"}],HTTP:[function(t,e,o){"use strict";cc._RF.push(e,"232e5KGORdPh77F6mDzgVtc","HTTP"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,s=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),o=e,e.sendRequest=function(t,e,n,i){void 0===i&&(i=null);var s=cc.loader.getXMLHttpRequest();s.timeout=5e3;var c="?";for(var r in e)"?"!==c&&(c+="&"),c+=r+"="+e[r];null===i&&(i=o.url);var a=i+t+encodeURI(c);return console.log("RequestURL:"+a),s.open("GET",a,!0),cc.sys.isNative&&(s.setRequestHeader("Accept-Encoding","gzip,deflate"),s.setRequestHeader("Content-Type","text/html;charset=UTF-8")),s.onreadystatechange=function(){if(4===s.readyState&&s.status>=200&&s.status<300){console.log("http res("+s.responseText.length+"):"+s.responseText);try{var t=JSON.parse(s.responseText);null!==n&&n(t)}catch(t){console.log("err:"+t)}}},s.send(),s},e.sessionId=0,e.userId=0,e.master_url="http://alex.h5sa.api.com:12888",e.url="http://alex.h5sa.api.com:12888",e=o=__decorate([i],e);var o}(cc.Component));o.default=s,cc._RF.pop()},{}],LoadingLogic:[function(t,e,o){"use strict";cc._RF.push(e,"1ad981hc0pI976ip8lxju6J","LoadingLogic"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../HTTP"),i=t("../Net"),s=t("../Packet"),c=t("../UserHelper"),r=t("../AudioMgr"),a=cc._decorator,l=a.ccclass,u=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tipLabel=null,e._stateStr="",e}return __extends(e,t),e.prototype.onLoad=function(){if(cc.VERSION=2017032102,cc.UPDATE_URL="http://alex.h5sa.api.com:12888",cc.CUSTOMER_SERVICE_URL="http://kf.zb183.com:518/",!cc.sys.isNative&&cc.sys.isMobile){var t=this.node.getComponent(cc.Canvas);t.fitHeight=!0,t.fitWidth=!0}this.initMgr(),this.tipLabel.string=this._stateStr},e.prototype.start=function(){this.checkVersion()},e.prototype.checkVersion=function(){var t=this,e=function(e){null===e.version?console.error("version is null"):(t.startPreloading(),cc.gg.net.ip=e.loginServer)},o=null,n=!1,i=function(){t._stateStr="正在连接服务器",o=cc.gg.http.sendRequest("/server/info",null,function(t){o=null,n=!0,e(t.data)}),setTimeout(s,5e3)},s=function(){n||(o?(o.abort(),t._stateStr="连接失败，即将重试",setTimeout(i,5e3)):i())};s()},e.prototype.onLoadComplete=function(){this._stateStr="准备登录",cc.director.loadScene("LogonScene")},e.prototype.onKefuButtonClick=function(){cc.sys.openURL(cc.CUSTOMER_SERVICE_URL)},e.prototype.initMgr=function(){this._stateStr="正在连接服务器",cc.gg={},cc.gg.args=this.urlParse(),cc.gg.http=n.default,cc.gg.net=i.default,cc.gg.packet=s.default,cc.gg.scoreHelper={},cc.gg.scoreHelper.out=function(t){return t/100},cc.gg.scoreHelper.in=function(t){return 100*t},cc.gg.userHelper=c.default,cc.loader.loadRes("prefabs/Alert",cc.Prefab,function(t,e){var o=cc.instantiate(e);cc.director.getScene().addChild(o),cc.game.addPersistRootNode(o),cc.gg.alert=o.getComponent("Alert")}),cc.gg.audioMgr=new r.default,cc.gg.audioMgr.init(),cc.gg.currentRoomInfo={score:null},cc.gg.currentRoomInfoReset=function(){cc.gg.currentRoomInfo={score:null}},cc.loader.loadRes("prefabs/Bulletin",cc.Prefab,function(t,e){var o=cc.instantiate(e);cc.director.getScene().addChild(o),cc.game.addPersistRootNode(o),cc.gg.bulletin=o.getComponent("Bulletin")})},e.prototype.urlParse=function(){var t={};if(null===window.location)return t;for(var e,o,n=window.location.href,i=n.indexOf("?"),s=(n=n.substr(i+1)).split("&"),c=0;c<s.length;c++)(i=s[c].indexOf("="))>0&&(e=s[c].substring(0,i),o=s[c].substr(i+1),t[e]=o);return t},e.prototype.startPreloading=function(){this._stateStr="正在加载资源，请稍候",this.onLoadComplete()},e.prototype.update=function(t){if(0!==this._stateStr.length){this.tipLabel.string=this._stateStr+" ";for(var e=Math.floor(Date.now()/1e3)%4,o=0;o<e;++o)this.tipLabel.string+="."}},__decorate([u(cc.Label)],e.prototype,"tipLabel",void 0),e=__decorate([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../AudioMgr":"AudioMgr","../HTTP":"HTTP","../Net":"Net","../Packet":"Packet","../UserHelper":"UserHelper"}],LogonLogic:[function(t,e,o){"use strict";cc._RF.push(e,"68377rxS+JC/6tjRPx+/Ods","LogonLogic"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tipLabel=null,e.registerButton=null,e.logonButton=null,e.kefuButton=null,e.usernameInput=null,e.passwordInput=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initEventHandler(),this.setUsername(cc.gg.userHelper.getUsername()),this.setPassword(cc.gg.userHelper.getPassword()),cc.gg.audioMgr.playBGM("bgm_logon.mp3")},e.prototype.onFocusEvent=function(){cc.gg.audioMgr.playSFX("SE_Textbox.mp3")},e.prototype.initEventHandler=function(){var t=this;cc.gg.net.currentHandler=function(e){switch(e.mainCMD){case 1:switch(e.subCMD){case 103:t.onLogonSuccessEvent();break;case 104:t.onLogonFailedEvent(e.messages)}}}},e.prototype.setUsername=function(t){null!==t&&(this.usernameInput.string=t)},e.prototype.setPassword=function(t){null!==t&&(this.passwordInput.string=t)},e.prototype.onLogonFailedEvent=function(t){this.showTips(t),this.logonButton.interactable=!0},e.prototype.onLogonSuccessEvent=function(){cc.director.preloadScene("PlazaScene",function(){cc.director.loadScene("PlazaScene")})},e.prototype.onRegisterButtonClick=function(){this.onFocusEvent(),cc.director.loadScene("RegisterScene")},e.prototype.onLogonButtonClick=function(){this.onFocusEvent();var t=this.usernameInput.string,e=this.passwordInput.string,o=t.trim().length,n=e.trim().length;return o<6||o>16?(this.showTips("帐号长度必须在6-16个字符之间."),!1):(this.hideTips(),n<8||n>30?(this.showTips("密码长度必须在8-30个字符之间."),!1):(this.hideTips(),this.logonButton.interactable=!1,this.showTips("正在登录中,请稍后..."),cc.sys.localStorage.setItem("username",t),cc.sys.localStorage.setItem("password",e),void cc.gg.net.connect(function(){var o=new cc.gg.packet;o.mainCMD=1,o.subCMD=2,o.messages={u:t,p:e},cc.gg.net.send(o.toJsonString())})))},e.prototype.onKefuButtonClick=function(){this.onFocusEvent(),cc.sys.openURL(cc.CUSTOMER_SERVICE_URL)},e.prototype.showTips=function(t){this.tipLabel.string=t,cc.find("Canvas/tipLabel").active=!0},e.prototype.hideTips=function(){this.tipLabel.string="",cc.find("Canvas/tipLabel").active=!1},__decorate([s(cc.Label)],e.prototype,"tipLabel",void 0),__decorate([s(cc.Button)],e.prototype,"registerButton",void 0),__decorate([s(cc.Button)],e.prototype,"logonButton",void 0),__decorate([s(cc.Button)],e.prototype,"kefuButton",void 0),__decorate([s(cc.EditBox)],e.prototype,"usernameInput",void 0),__decorate([s(cc.EditBox)],e.prototype,"passwordInput",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],Net:[function(t,e,o){"use strict";cc._RF.push(e,"b9d9cO2AwtHD67Jvpquyakb","Net"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,s=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.connect=function(t,e){var o=this;this.connected?t():(this.sio=new WebSocket(this.ip),this.sio.onopen=function(e){o.connected=!0,t()},this.sio.onerror=function(t){console.log("net error:"+t.data)},this.sio.onmessage=function(t){if(console.log("onMessage:"+t.data),"p"!==t.data){var e=new cc.gg.packet;e.loadFormString(t.data),console.log(e),null!==o.globalHandler&&o.globalHandler(e),o.currentHandler(e)}else o.ping()},this.sio.onclose=function(t){o.fnDisconnect&&(o.fnDisconnect(),console.log("run disconnect alert"),o.fnDisconnect=null),o.connected=!1,console.log("connection Close:"+t)})},e.startHearbeat=function(){var t=this;this.lastReceiveTime=Date.now(),console.log(1),this.isPinging||(console.log(2),this.isPinging=!0,setInterval(function(){console.log(3),t.sio&&(console.log(4),Date.now()-t.lastReceiveTime>1e4?t.close():t.ping())},5e3))},e.send=function(t){this.sio&&(null!==t&&"object"==typeof t&&(t=JSON.stringify(t)),this.sio.send(t))},e.ping=function(){this.send("p")},e.close=function(){console.log("close"),this.sio.close(),this.connected=!1},e.ip="",e.sio=null,e.isPinging=!1,e.fnDisconnect=null,e.connected=!1,e.currentHandler=null,e.handlers={},e.lastReceiveTime=0,e.globalHandler=null,e=__decorate([i],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],Packet:[function(t,e,o){"use strict";cc._RF.push(e,"7f838f61tpATKhhZx0gW2dJ","Packet"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,s=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mainCMD=0,e.subCMD=0,e.messages=null,e}return __extends(e,t),e.prototype.loadFormString=function(t){var e=JSON.parse(t);return void 0!==e.m&&(this.mainCMD=e.m),void 0!==e.s&&(this.subCMD=e.s),void 0!==e.d&&(this.messages=e.d),this},e.prototype.toJsonString=function(){var t={m:this.mainCMD};return this.subCMD>0&&(t.s=this.subCMD),null!==this.messages&&(t.d=this.messages),JSON.stringify(t)},e.prototype.encode=function(){return this.toJsonString()},e.prototype.getMessages=function(){return this.messages},e=__decorate([i],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],PlazaLogic:[function(t,e,o){"use strict";cc._RF.push(e,"04573mv75dMyqm4yHjM/bKY","PlazaLogic"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.exitButton=null,e.usernameLabel=null,e.scoreLabel=null,e.insureScoreLabel=null,e.refreshButton=null,e.bankButton=null,e.buyButton=null,e.sellButton=null,e.activityButton=null,e.kefuButton=null,e.settingButton=null,e.alertDialog=null,e.noticeView=null,e.noticeLabel=null,e.roomItem=null,e.roomListView=null,e}return __extends(e,t),o=e,e.prototype.onLoad=function(){var t=this;this.initEventHandlers(),this.onRefreshButtonClick(),this.usernameLabel.string=cc.gg.userHelper.getUsername(),cc.gg.audioMgr.playBGM("bgm_lobby.mp3"),this.refreshNotice(),this.refreshRoomList(),this.schedule(function(){t.marqueeNotice()},10),o.isWaitingResponse=!1},e.prototype.initEventHandlers=function(){var t=this;cc.gg.net.currentHandler=function(e){switch(e.mainCMD){case 2:switch(e.subCMD){case 1:t.onRefreshScoreEvent(e.getMessages());break;case 4:t.onExitEvent();break;case 2:t.onNoticeEvent(e.getMessages());break;case 3:t.showRoomList(e.getMessages());break;case 5:t.onPermitEnterRoomEvent(e.getMessages());break;case 6:t.onRefuseEnterRoomEvent(e.getMessages())}}},cc.gg.net.fnDisconnect=function(){cc.gg.alert.show("因本地网络原因,与服务器的网络连接已断开,请重新登录!",function(){cc.director.loadScene("LogonScene")},!1)},cc.gg.net.globalHandler=function(t){if(999===t.mainCMD)switch(t.subCMD){case 1:cc.gg.bulletin.show(t.getMessages())}}},e.prototype.refreshRoomList=function(){var t=new cc.gg.packet;t.mainCMD=2,t.subCMD=3,cc.gg.net.send(t.encode())},e.prototype.showRoomList=function(t){var e=this.roomListView.content;if(e.removeAllChildren(),null!==t&&void 0!==t){for(var o in t){var n=t[o],i=cc.instantiate(this.roomItem);i.getComponent("RoomItemLogic").init(n.sid,n.title,n.score,n.count,n.limit),e.addChild(i)}var s=370*t.length;e.width=s,this.roomListView.scrollToLeft(0,!1)}},e.prototype.refreshNotice=function(){var t=new cc.gg.packet;t.mainCMD=2,t.subCMD=2,cc.gg.net.send(t.encode())},e.prototype.setScoreLabel=function(t){this.scoreLabel.string=cc.gg.scoreHelper.out(t),cc.gg.userHelper.score=t},e.prototype.setInsureScoreLabel=function(t){this.insureScoreLabel.string=cc.gg.scoreHelper.out(t),cc.gg.userHelper.insureScore=t},e.prototype.onRefreshScoreEvent=function(t){this.setScoreLabel(t.score),this.setInsureScoreLabel(t.insureScore)},e.prototype.onNoticeEvent=function(t){this.noticeLabel.string=t,this.marqueeNotice()},e.prototype.onExitEvent=function(){cc.director.loadScene("LogonScene")},e.prototype.onExitButtonClick=function(){cc.gg.alert.show("确定要退出游戏大厅吗?",function(){cc.gg.net.fnDisconnect=null;var t=new cc.gg.packet;t.mainCMD=2,t.subCMD=4,cc.gg.net.send(t.encode())})},e.prototype.onRefreshButtonClick=function(){var t=this.node.getChildByName("refreshButton");t.active=!1;var e=new cc.gg.packet;e.mainCMD=2,e.subCMD=1,cc.gg.net.send(e.encode()),this.scheduleOnce(function(){!1===t.active&&(t.active=!0)},5)},e.prototype.onKefuButtonClick=function(){cc.sys.openURL(cc.CUSTOMER_SERVICE_URL)},e.prototype.marqueeNotice=function(){var t=1.5*this.noticeLabel.node.width;t<1500&&(t=1500),t>3500&&(t=3500),this.noticeView.content.width=t,this.noticeView.scrollToLeft(0,!1),this.noticeView.scrollToRight(10,!1)},e.prototype.onPermitEnterRoomEvent=function(t){switch(console.log(t),cc.gg.currentRoomInfo.score=t.score,t.sid){case 1:console.log("進入一號遊戲房")}},e.prototype.onRefuseEnterRoomEvent=function(t){cc.gg.alert.show(t.reason),o.isWaitingResponse=!1},e.isWaitingResponse=!0,__decorate([s(cc.Button)],e.prototype,"exitButton",void 0),__decorate([s(cc.Label)],e.prototype,"usernameLabel",void 0),__decorate([s(cc.Label)],e.prototype,"scoreLabel",void 0),__decorate([s(cc.Label)],e.prototype,"insureScoreLabel",void 0),__decorate([s(cc.Button)],e.prototype,"refreshButton",void 0),__decorate([s(cc.Button)],e.prototype,"bankButton",void 0),__decorate([s(cc.Button)],e.prototype,"buyButton",void 0),__decorate([s(cc.Button)],e.prototype,"sellButton",void 0),__decorate([s(cc.Button)],e.prototype,"activityButton",void 0),__decorate([s(cc.Button)],e.prototype,"kefuButton",void 0),__decorate([s(cc.Button)],e.prototype,"settingButton",void 0),__decorate([s(cc.Prefab)],e.prototype,"alertDialog",void 0),__decorate([s(cc.ScrollView)],e.prototype,"noticeView",void 0),__decorate([s(cc.Label)],e.prototype,"noticeLabel",void 0),__decorate([s(cc.Prefab)],e.prototype,"roomItem",void 0),__decorate([s(cc.ScrollView)],e.prototype,"roomListView",void 0),e=o=__decorate([i],e);var o}(cc.Component);o.default=c,cc._RF.pop()},{}],RegisterLogic:[function(t,e,o){"use strict";cc._RF.push(e,"4b129VBr3hJLJvBNRgi8Fu+","RegisterLogic"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.submitButton=null,e.resetButton=null,e.usernameInput=null,e.passwordInput=null,e.closeButton=null,e.tipLabel=null,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.onCloseButtonClick=function(){cc.director.loadScene("LogonScene")},e.prototype.onResetButtonClick=function(){this.usernameInput.string="",this.passwordInput.string=""},e.prototype.onRegisterButtonClick=function(){var t=this,e=this.usernameInput.string,o=this.passwordInput.string,n=e.trim().length,i=o.trim().length;return n<6||n>16?(this.showTips("帐号长度必须在6-20个字符之间."),!1):(this.hideTips(),i<8||i>30?(this.showTips("密码长度必须在8-30个字符之间."),!1):(this.hideTips(),this.submitButton.interactable=!1,this.showTips("正在注册中,请稍后..."),void cc.gg.http.sendRequest("/user/quick",{account:e,password:o},function(n){if(1==n.status)return t.showTips("恭喜您,注册成功"),cc.gg.userHelper.setUsername(e),cc.gg.userHelper.setPassword(o),void cc.director.loadScene("LogonScene");t.showTips(n.msg)})))},e.prototype.showTips=function(t){this.tipLabel.string=t},e.prototype.hideTips=function(){this.tipLabel.string=""},__decorate([s(cc.Button)],e.prototype,"submitButton",void 0),__decorate([s(cc.Button)],e.prototype,"resetButton",void 0),__decorate([s(cc.EditBox)],e.prototype,"usernameInput",void 0),__decorate([s(cc.EditBox)],e.prototype,"passwordInput",void 0),__decorate([s(cc.Button)],e.prototype,"closeButton",void 0),__decorate([s(cc.Label)],e.prototype,"tipLabel",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],RoomItemLogic:[function(t,e,o){"use strict";cc._RF.push(e,"d100dvbevxBQq9BO/YVwKod","RoomItemLogic"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./PlazaLogic"),i=cc._decorator,s=i.ccclass,c=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sid=0,e.score=0,e.limit=0,e.scoreLabel=null,e.countLabel=null,e.limitLabel=null,e.titleLabel=null,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(t,e,o,n,i){this.sid=t,this.score=o,this.limit=i,this.scoreLabel.string=cc.gg.scoreHelper.out(o),this.countLabel.string=n,this.limitLabel.string=cc.gg.scoreHelper.out(i),this.titleLabel.string=e},e.prototype.onRoomClick=function(){if(!0!==n.default.isWaitingResponse)if(cc.gg.userHelper.score<this.limit)cc.gg.alert.show("您的金额不足,请先充值后再进入该房间!",null,!1);else{console.log("ROOM ID:"+this.sid.toString());var t=new cc.gg.packet;t.mainCMD=2,t.subCMD=5,t.messages={sid:this.sid},cc.gg.net.send(t.encode()),n.default.isWaitingResponse=!0}},__decorate([c(cc.Label)],e.prototype,"scoreLabel",void 0),__decorate([c(cc.Label)],e.prototype,"countLabel",void 0),__decorate([c(cc.Label)],e.prototype,"limitLabel",void 0),__decorate([c(cc.Label)],e.prototype,"titleLabel",void 0),e=__decorate([s],e)}(cc.Component);o.default=r,cc._RF.pop()},{"./PlazaLogic":"PlazaLogic"}],RoomListCtrlLogic:[function(t,e,o){"use strict";cc._RF.push(e,"76e3cCdwMpFtpn2i5xDo7l3","RoomListCtrlLogic"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,s=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemTemplate=null,e.scoreView=null,e.spawnCount=0,e.totalCount=0,e.spacing=0,e.bufferZone=0,e.content=null,e.items=null,e.updateTimer=null,e.updateInterval=null,e.lastContentPosY=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.content=this.scoreView.content,this.items=[],this.initialize(),this.updateTimer=0,this.updateInterval=.2,this.lastContentPosY=0},e.prototype.initialize=function(){},__decorate([s(cc.Node)],e.prototype,"itemTemplate",void 0),__decorate([s(cc.ScrollView)],e.prototype,"scoreView",void 0),__decorate([s({default:0})],e.prototype,"spawnCount",void 0),__decorate([s({default:0})],e.prototype,"totalCount",void 0),__decorate([s({default:0})],e.prototype,"spacing",void 0),__decorate([s({default:0})],e.prototype,"bufferZone",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],UserHelper:[function(t,e,o){"use strict";cc._RF.push(e,"1afafuic21ANLx5vfP2Opsw","UserHelper"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,s=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.setUsername=function(t){return cc.sys.localStorage.setItem("username",t),this},e.getUsername=function(){return cc.sys.localStorage.getItem("username")},e.setPassword=function(t){return cc.sys.localStorage.setItem("password",t),this},e.getPassword=function(){return cc.sys.localStorage.getItem("password")},e.score=0,e.insureScore=0,e=__decorate([i],e)}(cc.Component));o.default=s,cc._RF.pop()},{}]},{},["Alert","AudioMgr","Bulletin","HTTP","Net","Packet","UserHelper","LoadingLogic","LogonLogic","RegisterLogic","PlazaLogic","RoomItemLogic","RoomListCtrlLogic","CowcowBetScoreLogic","CowcowCardsLogic","CowcowEnemyLogic","CowcowEventConst","CowcowLogic"]);